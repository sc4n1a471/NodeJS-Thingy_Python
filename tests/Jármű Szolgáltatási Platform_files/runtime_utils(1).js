"use strict";var g_CurrentFrame=window;var g_TopFrame=g_CurrentFrame.parent;while(typeof g_TopFrame.document.body.attributes.snap=="undefined"){g_CurrentFrame=g_TopFrame;g_TopFrame=g_CurrentFrame.parent}function GetTopFrame(){return g_TopFrame}function PassToTopFrame(a){if(g_TopFrame&&g_TopFrame[a]){window[a]=function(){return g_TopFrame[a].apply(this,arguments)}}else{window[a]=function(){return null}}}var g_LocalizedStrings=g_TopFrame.g_Localization[g_TopFrame.g_defaultLanguage];var g_IsRequiredField=g_LocalizedStrings.REQUIRED_FIELD;var g_DateTimeSettings=g_LocalizedStrings;var g_scrollListenerID=0;if(g_TopFrame.DoHotkeydown){$("html").on("keydown",g_TopFrame.DoHotkeydown)}function SnapSysError(b,a){RunTimeError("Internal error: "+b,a)}function RunTimeError(c,a){if((new Error()).stack){c+="\n"+(new Error()).stack.toString()}var b=(c||"")+(a?(" "+a.toString()):"");if(typeof g_TopFrame.g_errorLog==="string"){g_TopFrame.g_errorLog+=(g_TopFrame.g_errorLog?"\n":"")+b}DoWindowOnError(c,window.location.href,0,0,new Error());DoConsoleLog(c,a)}function AjaxError(a,b,d,c){RunTimeError(a+": "+JSON.stringify(c)+" "+d+": "+JSON.stringify(b))}PassToTopFrame("SetWindowOnError");SetWindowOnError(window);function DoWindowOnError(d,b,e,c,a){if(g_TopFrame.g_sendErrorsToServer){SecureAJAX("doErrorLog.php",{cache:false,async:false,data:{Message:d,URL:b,Line:e,Column:c,Trace:a.stack,Type:a.name,Origin:"SNAP",PageID:document.pageID}});return false}}PassToTopFrame("DoConsoleLog");PassToTopFrame("DoConsoleTable");(function(a){a.fn.bindWithDelay=function(c,f,b,e,d){if(a.isFunction(f)){d=e;e=b;b=f;f=undefined}b.guid=b.guid||(a.guid&&a.guid++);return this.each(function(){var h=null;function g(){var k=a.extend(true,{},arguments[0]);var i=this;var l=function(){h=null;b.apply(i,[k])};if(!d){clearTimeout(h);h=null}if(!h){h=setTimeout(l,e)}}g.guid=b.guid;a(this).bind(c,f,g)})}})(jQuery);var g_lastShortcutKeyEvent=0;function PerformClickOnShortcut(c,a){if(a){if(g_lastShortcutKeyEvent==a.timeStamp){return}g_lastShortcutKeyEvent=a.timeStamp}if($("[role=dialog]:visible").length){return}var b=$(".shortcut-class-"+c+":visible:not(.disabled)");if(b.length==1){b[0].click();if(a){a.preventDefault()}}else{if(b.length>1){RunTimeError(b.length+" targets for keypress "+c+", none clicked.")}}}function MessageDialog(c,f,g,e,d){function b(h){return function(i){h.apply(this,arguments)}}var a=$("#"+c);d=$.extend({},{onOK:null,onYes:null,onNo:null,onCancel:null},d);a.find(".okButton").toggle($.isFunction(d.onOK));a.find(".yesButton").toggle($.isFunction(d.onYes));a.find(".noButton").toggle($.isFunction(d.onNo));a.find(".cancelButton").toggle($.isFunction(d.onCancel));a.find(".okButton").off("click").on({click:b(d.onOK)});a.find(".yesButton").off("click").on({click:b(d.onYes)});a.find(".noButton").off("click").on({click:b(d.onNo)});a.find(".cancelButton").off("click").on({click:b(d.onCancel)});if(f){a.find(".dlg_caption").text(f)}if(g){a.find(".dlg_title").text(g)}if(e){a.find(".dlg_text").text(e)}a.popup("open")}function MessageDlg(n,o,k,c,i,q,f,v){var g=$("#mydivpopup");if(g.hasClass("in")){return}i=$.extend({},{onOK:null,onCancel:null,onYes:null,onNo:null},i);q=$.extend({},{btnOK:"OK",btnCancel:"Cancel",btnYes:"Yes",btnNo:"No"},q);var b=$(g_TopFrame.document).find("body");var w=!$(b).find("#covering")[0];var t=$('<div class="modal" role="dialog" aria-labelledby="mydivpopup" id="mydivpopup"></div>');var s=$('<div class="modal-dialog"></div>').appendTo(t);var m=$('<div class="modal-content"></div>').appendTo(s);var r=$('<div class="modal-header"></div>');if(n||o){if(n){$('<h4 class="modal-title text-center"></h4>').text(n).appendTo(r)}if(o){$('<h2 class="modal-title"></h2>').text(o).appendTo(r)}r.appendTo(m)}if(v){m.addClass("panel").addClass("panel-"+v);r.addClass("panel-heading")}var e="";$.each((k||"").replace("\r","\n").split("\n"),function(x,z){var y=$("<p></p>").text(z);if(x!=0){e+="<br>"}e+=y.html();y.remove()});var u=$('<div class="modal-body"></div>');if(f&&(typeof f==="string")&&f.match(/^[0-9]+$/)){var a=$('<div class="media"></div>');var d=$('<div class="media-left"></div>');var h=$('<div class="media-body media-middle"></div>').html(e);$('<img id="dlg-image-1" alt="image">').attr("src","get_image.php?img="+f).appendTo(d);d.appendTo(a);h.appendTo(a);a.appendTo(u)}else{$("<p></p>").html(e).appendTo(u)}u.appendTo(m);var l=$('<div class="modal-footer"></div>');if(c!="X"){l.appendTo(m)}if(w){g.remove();$("body").append(t)}else{b.find("#dialogstyle").html(GetStylesheetsToCopy());b.find("#mydivpopup").remove();b.append(t)}if(c.indexOf("O")>-1){$("<button>",{text:q.btnOK,type:"button","class":"btn btn-default","data-dismiss":"modal"}).attr("id","snap-dialog-ok-button").on("click",function(){setTimeout(i.onOK,100)}).appendTo(l)}if(c.indexOf("C")>-1){$("<button>",{text:q.btnCancel,type:"button","class":"btn btn-default","data-dismiss":"modal"}).attr("id","snap-dialog-cancel-button").on("click",function(){setTimeout(i.onCancel,100)}).appendTo(l)}if(c.indexOf("Y")>-1){$("<button>",{text:q.btnYes,type:"button","class":"btn btn-default","data-dismiss":"modal"}).attr("id","snap-dialog-yes-button").on("click",function(){setTimeout(i.onYes,100)}).appendTo(l)}if(c.indexOf("N")>-1){$("<button>",{text:q.btnNo,type:"button","class":"btn btn-default","data-dismiss":"modal"}).attr("id","snap-dialog-no-button").on("click",function(){setTimeout(i.onNo,100)}).appendTo(l)}if(w){g.on("shown.bs.modal",function(){$(this).find("button:first").focus()});g.modal({backdrop:"static",keyboard:false,show:true})}else{var p=b.find("#mydivpopup");p.on("shown.bs.modal",function(){$(this).find("button:first").focus();b.find("#covering").addClass("active")});p.modal({backdrop:false,keyboard:false,show:true});p.on("hidden.bs.modal",function(){p.remove();b.find("#covering").toggleClass("active",b.find(".modal.in").length>0);if(b.find(".modal.in").length===0){b.find("#dialogstyle").html("")}})}}function CloseMessageDlg(){var a=$(g_TopFrame.document).find("body");var c=!$(a).find("#covering")[0];if(c){$("#mydivpopup").modal("hide")}else{var b=a.find("#mydivpopup");b.modal("hide")}}function HelpMessageDlg(f){var c=$(g_TopFrame.document).find("body");var d=!$(c).find("#covering")[0];var h=$("#"+f);var b=$('label[for="'+f+'"]').text();var g;if(h.is("[data-help-text]")){g=h.attr("data-help-text");g=ParseHelpText(g,f)}else{if(h.is("[data-help-doc]")){var a=h.attr("data-help-doc");var e=h.attr("data-help-section");g=DoGetHelp(a,{});g=ParseDocHelpText(g,e,f)}else{return}}if(!d){var i=c.find("#help-dialog");i.find(".modal-body").html(g);i.find("#help-title").text(b);i.modal({backdrop:false,keyboard:false,show:false});i.modal("show")}}function ParseHelpText(b,c){b=$("<div/>").text(b).html();var a=($("#"+c).is("[readonly]")||$("#"+c).is("[disabled]"))?false:true;if(a){return b.replace(/\*([^*]+)\*/g,"<a onclick=\"SetControlFromHelp('"+c+"','"+GetCurrentFrameID("X")+"','$1')\" data-dismiss=\"modal\">$1</a>")}else{return b.replace(/\*([^*]+)\*/g,'<a onclick="javascript: return;" >$1</a>')}}function ParseDocHelpText(d,a,e){var c=($("#"+e).is("[readonly]")||$("#"+e).is("[disabled]"))?false:true;if(a!=""){var b=d.indexOf("@@"+a+"@@");if(b==-1){throw'Help Error: section "'+a+'" not found in the provided help document!'}d=d.substr((b)+(a.length)+(4));if(d.indexOf("@@")!=-1){d=d.substr(0,d.indexOf("@@"))}}if(c){return d.replace(/\*([^*]+)\*/g,"<a onclick=\"SetControlFromHelp('"+e+"','"+GetCurrentFrameID("X")+"','$1')\" data-dismiss=\"modal\">$1</a>")}else{return d.replace(/\*([^*]+)\*/g,'<a onclick="javascript: return;" >$1</a>')}}function GetElementOfArray(a,b){if(b===null||b===undefined){return null}return b[a-1]}function GetFieldOfObject(c,b,d){if(b===null||b===undefined||typeof b!=="object"){return null}var a=b[c];if(d){delete b[c]}return a}function CheckIsIn(b,a){if(a===null||a===undefined||typeof a!=="object"){return false}return b in a}function AsBoolean(a){if(a===null||a===undefined){return false}if(a.constructor==Boolean){return a}if(a.constructor==Number){return a!=0}if(a.constructor==String){return a.toLowerCase()=="true"}return false}function MathRoundTo(b,a){var c=Math.pow(10,a);return Math.round(b*c)/c}function MathCeilTo(b,a){var c=Math.pow(10,a);return Math.ceil(b*c)/c}function MathFloorTo(b,a){var c=Math.pow(10,a);return Math.floor(b*c)/c}function CurrentUserIsInGroup(a){return GetUserInfo().groups.indexOf(a)>=0}function ArrayToListView(b,a){var c=$("#"+a);c.empty();$.each(b,function(g,d){var f,h,k;f=$("<li>").addClass("list-group-item");if(d.context){f.addClass("list-group-item-"+d.context)}if(typeof d.image=="string"&&d.image.match(/^[0-9]+$/)&&d.image!=0&&d.image!="0"){h=$("<img>").attr("src","get_image.php?img="+d.image).addClass("img-rounded");if(d.isize){h.addClass(d.isize)}h=$("<div>").addClass("media-left").append(h)}k=$("<div>");if(d.header){k.append($("<h4>").addClass("list-group-item-heading").text(d.header))}if(d.listitem){k.append($("<p>").addClass("list-group-item-text").text(d.listitem))}if(h){f.append($("<div>").addClass("media").append(h).append(k.addClass("media-body")))}else{f.append(k.unwrap())}if(d.link){var e=$("<a>").attr("href","#").attr("id",a+"-listitem-"+g).attr("ctrl_type","listitem").append(f.children());f.empty().append(e)}else{f.attr("id",a+"-listitem-"+g)}if(d.aside){f.prepend($("<span>").addClass("badge").text(d.aside))}c.append(f)})}function ListViewToArray(b){var a=[];b.find("li").each(function(){var d=$(this);var c=null;$.each(cListItemContextClasses,function(f,g){if(d.hasClass(g)){c=g.replace("list-group-item-","")}});a.push({context:c,image:(d.find("img[src]").length>0)?d.find("img").attr("src").replace(/^get_image.php\?img=/,""):null,header:d.find(".list-group-item-heading").text(),listitem:d.find(".list-group-item-text").text(),link:d.find("a").length>0,aside:d.find(".badge").text()})});return a}function SelectMenuOptionsToArray(e){var f=$("#"+e)[0];var c=[],d=0,b=f.length;for(;d<b;d++){var a=$(f[d]);c.push({value:a.attr("value"),selected:a[0].selected,enabled:!a.attr("disabled"),visible:!a.hasClass("hidden"),placeholder:!!a.data("placeholder"),subtext:a.attr("data-subtext"),display:a.text()})}return c}function GetStylesheetsToCopy(){var a="";$.each(document.styleSheets,function(){if(this.href!=null&&this.href.indexOf("get_stylesheet")!=-1){a+=Array.prototype.map.call(this.cssRules,function(b){return b.cssText||""}).join("\n")}});return a}function GetDatePartOf(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0)}function GetTimePartOf(a){return new Date(0,0,0,a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())}function format_dt(d,g,i){var h,e,k;var b=/\\?(.?)/gi;var a=function(f,l){return e[f]?e[f]():l};var c=function(l,f){l=String(l);while(l.length<f){l="0"+l}return l};e={d:function(){return c(e.j(),2)},D:function(){var f=e.w();return $.isArray(g.DAY_SHORT_NAMES)&&undefined!==g.DAY_SHORT_NAMES[f]?g.DAY_SHORT_NAMES[f]:($.isArray(g.DAY_LONG_NAMES)&&undefined!==g.DAY_LONG_NAMES[f]?g.DAY_LONG_NAMES[f].substr(0,3):null)},j:function(){return h.getDate()},l:function(){return g.DAY_LONG_NAMES[e.w()]},N:function(){return e.w()||7},S:function(){var f=e.j();var l=f%10;if(l<=3&&parseInt((f%100)/10,10)==1){l=0}return["st","nd","rd"][l-1]||"th"},w:function(){return h.getDay()},z:function(){var l=new Date(e.Y(),e.n()-1,e.j());var f=new Date(e.Y(),0,1);return Math.round((l-f)/86400000)},W:function(){var l=new Date(e.Y(),e.n()-1,e.j()-e.N()+3);var f=new Date(l.getFullYear(),0,4);return c(1+Math.round((l-f)/86400000/7),2)},F:function(){return g.MONTH_LONG_NAMES[e.n()-1]},m:function(){return c(e.n(),2)},M:function(){return g.MONTH_SHORT_NAMES[e.n()-1]},n:function(){return h.getMonth()+1},t:function(){return(new Date(e.Y(),e.n(),0)).getDate()},L:function(){var f=e.Y();return(f%4===0&&f%100!==0||f%400===0)?1:0},o:function(){var m=e.n();var f=e.W();var l=e.Y();return l+(m===12&&f<9?1:m===1&&f>9?-1:0)},Y:function(){return h.getFullYear()},y:function(){return e.Y().toString().slice(-2)},a:function(){return g.PERIODS[h.getHours()>11?1:0].toLowerCase()},A:function(){return g.PERIODS[h.getHours()>11?1:0].toUpperCase()},B:function(){var l=h.getUTCHours()*3600;var f=h.getUTCMinutes()*60;var m=h.getUTCSeconds();return c(Math.floor((l+f+m+3600)/86.4)%1000,3)},g:function(){return e.G()%12||12},G:function(){return h.getHours()},h:function(){return c(e.g(),2)},H:function(){return c(e.G(),2)},i:function(){return c(h.getMinutes(),2)},s:function(){return c(h.getSeconds(),2)},u:function(){return c(h.getMilliseconds()*1000,6)},v:function(){return c(h.getMilliseconds(),3)},e:function(){return"UTC"},I:function(){var l=new Date(e.Y(),0);var n=Date.UTC(e.Y(),0);var f=new Date(e.Y(),6);var m=Date.UTC(e.Y(),6);return((l-n)!==(f-m))?1:0},O:function(){var l=h.getTimezoneOffset();var f=Math.abs(l);return(l>0?"-":"+")+c(Math.floor(f/60)*100+f%60,4)},P:function(){var f=e.O();return f.substr(0,3)+":"+f.substr(3,2)},T:function(){return"UTC"},Z:function(){return -h.getTimezoneOffset()*60},c:function(){return"Y-m-d\\TH:i:sP".replace(b,a)},r:function(){return"D, d M Y H:i:s O".replace(b,a)},U:function(){return Math.floor(h/1000)},C:function(){var f=new Date(h.getTime()+60000*h.getTimezoneOffset());return format_dt(f,g,"Y-m-d\\TH:i:s\\Z")},"$":function(){return h.toLocaleString()}};k=function(l,f){h=(f===undefined?new Date():(f instanceof Date)?new Date(f):new Date(f*1000));return l.replace(b,a)};return k(i,d)}function parse_dt(g,h,e){var a=new Date(0),b;var d=/\\?(.?)/gi;var c=function(f,i){if(b[f]){b[f]()}else{if(i){var k=b.readNchars(i.length);if(k!=i){throw'"'+i+'" expected instead of "'+k+'" in parse_dt.'}}}};b={in_str:g,peekNchars:function(f){return this.in_str.substr(0,f)},readNchars:function(i){var f=this.peekNchars(i);this.in_str=this.in_str.substr(i);return f},countDigits:function(k){var f=0;while(f<this.in_str.length&&f<k&&this.in_str.substr(f,1).match(/\d/)){f++}return f},readMaxNdigits:function(i){var f=this.countDigits(i);if(f>0){return Number(this.readNchars(f))}throw i+' digits expected instead of "'+this.in_str+'" in parse_dt.'},readNdigits:function(i){var f=this.countDigits(i);if(f==i){return Number(this.readNchars(f))}throw"Exactly "+i+' digits expected instead of "'+this.in_str+'" in parse_dt.'},readWord:function(i){var f=this.peekNchars(i.length);if(f.toLowerCase()==i.toLowerCase()){return this.readNchars(i.length)}return null},readFirstWord:function(l){var k=0,f=l.length;for(;k<f;k++){if(this.readWord(l[k])){return k}}return null},d:function(){a.setDate(this.readNdigits(2))},j:function(){a.setDate(this.readMaxNdigits(2))},S:function(){var f=b.j();var k=f%10;if(k<=3&&parseInt((f%100)/10,10)==1){k=0}return["st","nd","rd"][k-1]||"th"},z:function(){a.setDate(this.readMaxNdigits(3)+1)},F:function(){var f=this.readFirstWord(h.MONTH_LONG_NAMES);if(f==null){throw'Month name expected instead of "'+this.in_str+'".'}a.setMonth(f)},m:function(){a.setMonth(this.readNdigits(2)-1)},M:function(){var f=this.readFirstWord(h.MONTH_SHORT_NAMES);if(f==null){throw'Month abbreviation expected instead of "'+this.in_str+'".'}a.setMonth(f)},n:function(){a.setMonth(this.readMaxNdigits(2)-1)},Y:function(){a.setFullYear(this.readNdigits(4))},y:function(){var f=this.readNdigits(2);a.setFullYear((f>49?1900:2000)+f)},a:function(){if(this.readWord(h.PERIODS[0])){return}else{if(this.readWord(h.PERIODS[1])){a.setHours(a.getHours()+12)}else{throw PERIODS[0]+"/"+PERIODS[1]+' expected instead of "'+this.in_str+'".'}}},A:function(){b.a()},g:function(){a.setHours(this.readMaxNdigits(2))},G:function(){a.setHours(this.readMaxNdigits(2))},h:function(){a.setHours(this.readNdigits(2))},H:function(){a.setHours(this.readNdigits(2))},i:function(){a.setMinutes(this.readNdigits(2))},s:function(){a.setSeconds(this.readNdigits(2))},u:function(){a.setMilliseconds(this.readMaxNdigits(6)/1000)},v:function(){a.setMilliseconds(this.readMaxNdigits(3))},O:function(){var i=this.readFirstWord(["+","-"]);if(i==null){throw'+/- sign expected instead of "'+this.in_str+'".'}var k=this.readNdigits(2);var f=this.readNdigits(2);a.setMinutes(a.getMinutes()-(i?-1:1)*(60*k+f)-a.getTimezoneOffset())},P:function(){var i=this.readFirstWord(["+","-"]);if(i==null){throw'+/- sign expected instead of "'+this.in_str+'".'}var k=this.readNdigits(2);var l=this.readFirstWord([":"]);if(l==null){throw'":" expected instead of "'+this.in_str+'".'}var f=this.readNdigits(2);a.setMinutes(a.getMinutes()-(i?-1:1)*(60*k+f)-a.getTimezoneOffset())},c:function(){return"Y-m-d\\TH:i:sP".replace(d,c)},r:function(){return"D, d M Y H:i:s O".replace(d,c)},U:function(){a.setMilliseconds(this.readMaxNdigits(99)*1000)},C:function(){a=new Date(this.in_str)},"$":function(){a=new Date(this.in_str)}};e.replace(d,c);return a}function GetParentControl(b){var a=$("#"+b).parents(".tab-pane,[ctrl_type]").first();if(a.hasClass("tab-pane")){return a.attr("id").replace(/^ui-id-/,"")}else{return a.attr("id")}}function GetChildControl(a,c){var e;if(typeof a!=="string"){return undefined}if(a.indexOf(".")>-1){var d=a.substring(0,a.indexOf("."));var b=a.substring(a.length-a.indexOf(".")+2);e=$("#"+c).find("[layout_record_field_name="+JSON.stringify(d)+"]").find('[ctrl_type="datatable_header"]').filter("[layout_record_field_name="+JSON.stringify(b)+"]")}else{e=$("#"+c).find("[layout_record_field_name="+JSON.stringify(a)+"]")}if(!e.length){e=$("#"+c+" #"+a)}return e.attr("id")}function GetIndexedControl(c,a){var b=$("#"+a).children("[_sys_listindex="+JSON.stringify(c)+"]");return b.attr("id")}function GetCurrentRecord(a){var b=$(a).closest('[ctrl_type="layout_record"]');return b.attr("id")}function SetFocusAndShow(d){if(!d){return}var e=$("#"+d);var a=$("#thePage");var c=0;if(!(a.scrollTop()==0&&e.offset().top>0&&e.offset().top<a.height())){var b=a.scrollTop()+e.offset().top;if(a.css("padding-top")){b-=Number(a.css("padding-top").replace("px",""))}$(".navbar-fixed-top:visible").each(function(){c=Math.max(c,$(this).height())});b-=c;b-=24;a.animate({scrollTop:b},250)}e.focus()}var cListItemPrefix="_sys_list_item_";var g_nextListItemIndex=1;var cInListClass="_sys_in_list";var cAfterAppendRecordEventPrefix="_sys_after_append_record_";var cAfterRecordSelectedPrefix="_sys_after_record_selected_";var cAdvgridClassPrefix="_sys_advgrid_class_";var cAdvsectionClassPrefix="_sys_advsection_class_";var cInvalidationMessagePrefix="_sys_invalidation-message-";function ControlIsHidden(a){if(!a.length){return false}if(a[0]==a.context){return false}if(a.hasClass("panel-collapse")){if(a.hasClass("hidden")){return true}}else{if(a.is("[ctrl_type]")&&a.css("display")=="none"){return true}}if(a.hasClass("tab-pane")){var b=a.attr("id").replace(/^ui-id-/,"");if(!GetControlProp(b,"visible")||!GetControlProp(b,"enabled")){return true}}return ControlIsHidden(a.parent())}function SetInvalidationMessage2(e,b,f){var c=$("#"+e);var d=Control_type_of_$(c);var a=c.attr("data-isvalid")==="false";b=b||a?true:false;if(ControlTypeHasProp(d,"readonly")&&GetControlProp(e,"readonly")){return}if(ControlTypeHasProp(d,"enabled")&&!GetControlProp(e,"enabled")){return}if(ControlIsHidden(c)){return}c.toggleClass("invalid_input",b);c.closest("div.bootstrap-select").toggleClass("invalid_input",b);if(b&&f){$("#"+AddPrefix(cInvalidationMessagePrefix,e)).text(f)}else{$("#"+AddPrefix(cInvalidationMessagePrefix,e)).empty()}}function FirstInvalidControl(){var a=AllInvalidControls();return a.length?a[0]:""}function AllInvalidControls(){var a=[];$('[id^="'+cInvalidationMessagePrefix+'"]').each(function(){var d=DelPrefix(cInvalidationMessagePrefix,this.id);var b=$("#"+d);var c=Control_type_of_$(b);if(b.parents("._sys_list_template").length){return}if(ControlTypeHasProp(c,"readonly")&&GetControlProp(d,"readonly")){return}if(ControlTypeHasProp(c,"enabled")&&!GetControlProp(d,"enabled")){return}if(ControlIsHidden(b)){return}b.trigger("control_validating");if(b.hasClass("invalid_input")){a.push(d)}});return a}function DoGetReport(d,c,b){c._sys_report_id=d;c._sys_report_format=b=="_sys_newtabPDF"?"PDF":"HTML";if(b=="_sys_newtabPDF"){var e="";for(var a in c){if(e!=""){e+="&"}e+=a+"="+encodeURIComponent(c[a])}window.open("get_report.php?"+e)}else{SecureAJAX("get_report.php",{data:c,success:function(f){if(b=="_sys_newtabHTML"){window.open().document.write(f)}else{SetControlProp(b,"content",f)}}})}}var loadedHelpDocs={};function DoGetHelp(c,b){if(loadedHelpDocs[c]){return loadedHelpDocs[c]}else{b._sys_report_id=c;var a;SecureAJAX("get_report.php",{data:b,async:false,success:function(e){a=e}});loadedHelpDocs[c]=a;return a}}function GetCurrentFrameID(a){return(a=="X"&&g_CurrentFrame.frameElement)?g_CurrentFrame.frameElement.name:a}function DoGetPage(d,a,b,c){a=GetCurrentFrameID(a);if(g_TopFrame&&g_TopFrame.DoGetPage){g_TopFrame.DoGetPage(d,a,b,c)}}function SetWindowTitle(c){var b=$("body").css("background-color").replace(/[rgb() ]/g,"").split(",").map(parseFloat);var a=0.3*b[0]+0.6*b[1]+0.1*b[2]<128;if(window.top.SetWindowTitle&&GetCurrentFrameID("X")==="M"){window.top.SetWindowTitle(c,a)}}function ProcessPageParams(){var g={};function h(p,v,r){var s,q,n=r,t,l=/\[([^\]]*)\]/g,u=[p.replace(l,"")];while(t=l.exec(p)){u.push(t[1])}while(true){q=u.shift();if(q.trim()==""){if(n.constructor.name=="Array"){q=n.length}else{if(n===r){q=null}else{q=-1;for(s in n){if(+s>q){q=+s}}q++}}}if(u.length){if(n[q]==null||typeof n[q]!="object"){n[q]=isNaN(u[0])?({}):[]}n=n[q]}else{n[q]=v===""?null:v;break}}return r}var e,d,a,m,f=[],c=(window.location.search.substring(1)).split("&"),b=c.length;for(e=0;e<b;e++){if(c[e]===""){continue}a=c[e].split("=");d=decodeURIComponent(a[0]);m=a[1];m=(m!=null)?decodeURIComponent(m.replace(/\+/g,"%20")):"";f.push([d,m])}for(e=0,b=f.length;e<b;e++){h(f[e][0],f[e][1],g)}document.pageParams=g}function Get_sys_FrameNonce(){if(window.name){return window.name}if(window.parent&&window.parent!=window&&window.parent.Get_sys_FrameNonce){return window.parent.Get_sys_FrameNonce()}return null}PassToTopFrame("GetSessionValue");PassToTopFrame("SetSessionValue");PassToTopFrame("IncludeSessionValue");PassToTopFrame("GetUserInfo");function GetServerDatetime(){if(g_TopFrame&&g_TopFrame.GetServerDatetime){return new Date(g_TopFrame.GetServerDatetime())}return null}PassToTopFrame("RenderDatatableCell");function RelURLFromSNAP(a){if(a.indexOf("//")<0&&a.substr(0,1)!=="/"){a="../"+a}return a}function DoGetURL(b,c,a,e){if(!b){return}b=RelURLFromSNAP(b);if(e==="POST"){var g="_sys_post_form";var d;switch(a){case"here":d="";break;case"herw":d="_top";break;case"neww":d="_blank";break;default:SnapSysError('Unimplemented "open URL" target window: '+a);break}$("<form>").attr("method","POST").attr("action",b).attr("target",d).attr("id",g).hide().appendTo("body");$.each(c||{},function(i,h){$("<input>").attr("name",i).attr("value",h).appendTo("#"+g)});$("#"+g).submit().remove()}else{var f=$.param(c).replace(/\+/g,"%20");b=b+(f?"?"+f:"");switch(a){case"here":window.location=b;break;case"herw":g_TopFrame.location=b;break;case"neww":window.open(b);break;default:SnapSysError('Unimplemented "open URL" target window: '+a)}}}function GetTextFieldValue(a){var b=$("#"+a);if(b.hasClass("upcase_field")){return b.val().toUpperCase()}if(b.hasClass("locase_field")){return b.val().toLowerCase()}return b.val()}function SetTextFieldValue(b,a){SetTextFieldValue2($("#"+b),a)}function SetTextFieldValue2(b,a){if(b.hasClass("upcase_field")&&a&&a.toUpperCase){a=a.toUpperCase()}else{if(b.hasClass("locase_field")&&a&&a.toLowerCase){a=a.toLowerCase()}}b.val(a).trigger("control_valuechanged")}function SayToFrame(e,a,d){var b;if(e){if(e==="."){b=window}else{var c=window.document.getElementById(e);if(c){b=c.contentWindow}else{RunTimeError("SayToFrame: iFrame "+JSON.stringify(e)+" is not loaded.");return}}}else{b=window.parent}if(b.$){b.$(b.document.body).trigger("say_"+a,[d,window.frameElement.id||window.frameElement.name])}else{RunTimeError("SayToFrame: iFrame "+JSON.stringify(e)+" has no $.")}}function SetFrameUniv(b,a){if($("#"+b).hasClass("autoframe")){RunTimeError(b+" frame is not fix sized.")}else{$("#"+b).prop("height",a)}}function GetFrameUniv(a){return[window.document.getElementById(a).clientHeight,window.document.getElementById(a).clientWidth]}PassToTopFrame("GetIFrameLoaded");PassToTopFrame("SetFrameLoaded");function DoSetFrame(e,d,b,a,c){if(g_TopFrame&&g_TopFrame.DoSetFrame){g_TopFrame.DoSetFrame(e,window.document.getElementById(d),b,a,c)}}function GetPanelUniv(a,b){a=GetCurrentFrameID(a);if(g_TopFrame&&g_TopFrame.GetPanelUniv){return g_TopFrame.GetPanelUniv(a,b)}return null}PassToTopFrame("SetPanelUniv");function GetPanelLoaded(a){a=GetCurrentFrameID(a);if(g_TopFrame&&g_TopFrame.GetPanelLoaded){return g_TopFrame.GetPanelLoaded(a)}return null}PassToTopFrame("SetPanelLoaded");function SayToPanel(b,a,c){b=GetCurrentFrameID(b);if(g_TopFrame&&g_TopFrame.SayToPanel){g_TopFrame.SayToPanel(b,a,c,window.frameElement.id||window.frameElement.name)}}function OpenPageDialog(d,a,c,b){g_TopFrame.OpenPageDialog(d,a,c,b,GetStylesheetsToCopy())}PassToTopFrame("ClosePageDialog");PassToTopFrame("RevealAdvPanel");PassToTopFrame("RevealNavPanel");function RecalcControls(c,a){if(a){return}var b=c.find('.dataTable,.bxslider,.timeline,[ctrl_type="chart"]').not(".hidden").add(c);b.filter(".dataTable:visible").not(".snap-recalc-ok").each(function(){$(this).DataTable().draw().responsive.recalc()}).trigger("resize").addClass("snap-recalc-ok",true);b.filter(".bxslider").each(function(){var d=$(this).data("carouselObject");if(d){var e=d.getCurrentSlide();d.reloadSlider();d.goToSlide(e)}});b.filter(".timeline").each(function(){var d=$(this).data("timelineObject");if(d){d.redraw()}});b.filter('[ctrl_type="chart"]').each(function(){$(this).data("chartObject").resize()});c.find('[ctrl_type="ctr-calendar"]').each(function(d,f){$(f).fullCalendar("render")});c.find('[ctrl_type="layout_list"][data-lazy]').each(function(){UpdateLayoutListRenderLimit($(this))});if(c.find('div[ctrl_type="google_map_streetview"]').length){window.dispatchEvent(new Event("resize"))}}function UpdateCardTableSortpicker(a,c){var b;b=a.DataTable().order();if(b.length>0){c.val(b[0][1].substr(0,1)+b[0][0])}}function InitCardTableControls(a){var d=$(a);var c=$("<select>");var b=[];if(!a.is(".snap-card-table-sm")&&!a.is(".snap-card-table-md")&&!a.is(".snap-card-table-lg")&&!a.is(".snap-card-table-xl")){return}a.parent().children('[name="'+a.attr("id")+'_sort"]').remove();a.find("[ctrl_type=datatable_header]").each(function(f,g){var e=$(g);if(e.is("[data-orderable]")){b.push({index:f,caption:e.text()})}});if(b.length!==0){b.forEach(function(e){$("<option>").attr("value","a"+e.index).text(e.caption+" \u25b2").appendTo(c);$("<option>").attr("value","d"+e.index).text(e.caption+" \u25bc").appendTo(c)});c.addClass("dataTables_sort");if(d.is(".snap-card-table-sm")){c.addClass("hidden-sm").addClass("hidden-md").addClass("hidden-lg").addClass("hidden-xl")}else{if(d.is(".snap-card-table-md")){c.addClass("hidden-md").addClass("hidden-lg").addClass("hidden-xl")}else{if(d.is(".snap-card-table-lg")){c.addClass("hidden-lg").addClass("hidden-xl")}}}c.attr("aria-controls",a.attr("id"));c.attr("name",a.attr("id")+"_sort");c.on("change",function(){var e=$(this).val();var g=Number.parseInt(e.substr(1));var f=e[0]==="a"?"asc":"desc";a.DataTable().order([[g,f]]).draw(false)});UpdateCardTableSortpicker(a,c);a.find("[ctrl_type=datatable_header]").on("click",function(){UpdateCardTableSortpicker(a,c)});c.insertBefore(a)}}function GetArrayElement(b,a){return(b&&a<b.length)?b[a]:undefined}function SetNumbersToLocale(a){if(!a.scales){a.scales={}}if(!a.scales.xAxes){a.scales.xAxes=[{}]}if(!a.scales.yAxes){a.scales.yAxes=[{}]}[a.scales.xAxes,a.scales.yAxes].forEach(function(b){b.forEach(function(c){if(!c.ticks){c.ticks={}}c.ticks.callback=function(d){return typeof d==="number"?d.toLocaleString():d.toString()}})})}function GetChartProperty(b,a){var c=$("#"+b);return c.data(a)}var cChartTypes={Bar:"bar",Doughnut:"doughnut",hBar:"horizontalBar",Line:"line",Pie:"pie"};var cSegmentColorDefaults=["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#B4B482","#B15928"];var cSegmentHighlightColorDefaults=["#CEF6FF","#47A0DC","#DAFFB2","#5BC854","#FFC2C1","#FF4244","#FFE797","#FFA728","#F2DAFE","#9265C2","#DCDCAA","#D98150"];function SetChartProperty(a,h,v,m){var p=$("#"+a);if(h){p.data(h,v)}if(!m){return}if(p.data("chartObject")){p.data("chartObject").destroy()}try{var k=p.data("chartType");var y=p.data("chartValues");var n=p.data("chartLabels");var x=p.data("chartBarLabels");var C=p.data("chartFillColors")||cSegmentColorDefaults;var c=p.data("chartStrokeColors")||cSegmentColorDefaults;var r=p.data("chartHFillColors")||cSegmentHighlightColorDefaults;var f=p.data("chartHStrokeColors")||cSegmentHighlightColorDefaults;var q=p.data("chartPFillColors")||cSegmentColorDefaults;var b=p.data("chartPStrokeColors")||cSegmentColorDefaults;var u=p.data("chartSteppedLine");var B=p.data("chartHitRadius");var o=p.data("chartHoverRadius");var l=p.data("chartHBorderWidth");var A,t=0,w=y?y.length:0;switch(k){case"Bar":case"hBar":A={};A.labels=n?JSON.parse(JSON.stringify(n)):[];A.datasets=[];for(;t<w;t++){A.datasets.push({label:GetArrayElement(x,t),backgroundColor:GetArrayElement(C,t),borderColor:GetArrayElement(c,t),hoverBackgroundColor:GetArrayElement(r,t),hoverBorderColor:GetArrayElement(f,t),hoverBorderWidth:GetArrayElement(l,t),data:GetArrayElement(y,t)})}break;case"Line":A={};A.labels=n?JSON.parse(JSON.stringify(n)):[];A.datasets=[];for(;t<w;t++){A.datasets.push({label:GetArrayElement(x,t),backgroundColor:GetArrayElement(C,t),borderColor:GetArrayElement(c,t),pointHoverBackgroundColor:GetArrayElement(r,t),pointHoverBorderColor:GetArrayElement(f,t),pointBackgroundColor:GetArrayElement(q,t),pointBorderColor:GetArrayElement(b,t),steppedLine:GetArrayElement(u,t),hitRadius:GetArrayElement(B,t),pointHoverRadius:GetArrayElement(o,t),pointHoverBorderWidth:GetArrayElement(l,t),data:GetArrayElement(y,t)})}break;case"Doughnut":case"Pie":A={};A.labels=n?JSON.parse(JSON.stringify(n)):[];A.datasets=[];for(;t<w;t++){A.datasets.push({label:GetArrayElement(x,t),backgroundColor:C,borderColor:c,hoverBackgroundColor:r,hoverBorderColor:f,hoverBorderWidth:GetArrayElement(l,t),data:GetArrayElement(y,t)})}break}var s=p.data("chartOptions")||{};var g=typeof p.data("numbersToLocale")==="undefined"?true:p.data("numbersToLocale");if(g&&k!=="Pie"&&k!=="Doughnut"){s=JSON.parse(JSON.stringify(s));SetNumbersToLocale(s)}s=$.extend(true,s,{tooltips:{callbacks:{label:function(d,e){var i=k==="Bar"||k==="hBar"||k==="Line";return(!i?(e.labels[d.index]+": "):"")+e.datasets[d.datasetIndex].data[d.index].toLocaleString()}}}});p.data("chartObject",new Chart(p,{type:cChartTypes[k],data:A,options:s}))}catch(z){SnapSysError('SetChartProperty: Error in setting the "'+h+'" chart property for #'+a+" ["+k+"]:",z)}}function GetChartClickedData(a){return $(a.target).data("chartObject").getElementAtEvent(a)}function ProcessCalEvent(a,c){var b;if(c){b={start:a.start!=null?a.start.toDate().toISOString().split(".")[0]+"Z":"",end:a.end!=null?a.end.toDate().toISOString().split(".")[0]+"Z":""}}else{b={start:a.start!=null?a.start.toDate():null,end:a.end!=null?a.end.toDate():null}}delete a.source;delete a.className;delete a.start;delete a.end;$.extend(b,a);return b}function ProcessCalEvents(a,c){var b=[];$.each(a,function(d,f){b.push(ProcessCalEvent(f,c))});return b}function Control_type_of_$(b){var a="";if(b.length>0){a=b.attr("ctrl_type")}return a}function Control_type(a){if(!a||a=="?"||!$){return""}if(a.indexOf(".")>-1){return"datatable_header"}return Control_type_of_$($("#"+a))}var cTextInputProperties=[["aria label","aria-label",["String"]],["context","context",["String"]],["enabled","enabled",["Boolean"]],["help text","help",["String"]],["label","label",["String"]],["mask","mask",["jsObject","String"]],["placeholder","placeholder",["String"]],["prefix","prefix",["String","Number","jsObject"]],["read only","readonly",["Boolean"]],["suggestions","suggestions",["Array"]],["suffix","suffix",["String","Number","jsObject"]],["tooltip-title","tooltip",["String"]],["value","value",["String","Number","Boolean","jsColour"]]];var cButtonProperties=[["aria label","aria-label",["String"]],["context","context",["String"]],["caption","text",["String","Number","Boolean"]],["enabled","enabled",["Boolean"]],["icon","icon",["String"]],["tooltip-title","tooltip",["String"]]];var cControlProperties={advgrid:[],advsection:[["enabled","enabled",["Boolean"]],["hollowed","hollowed",["Boolean"]],["read only","readonly",["Boolean"]]],badge:[["aria label","aria-label",["String"]],["context","context",["String"]],["text","text",["String","Number","Boolean"]],["tooltip-title","tooltip",["String"]]],"badge-properties":[["context","context",["String"]],["text","text",["String","Number","Boolean"]],["tooltip-title","tooltip",["String"]]],button:cButtonProperties,dropdown_button:cButtonProperties,"ctr-calendar":[["aria label","aria-label",["String"]],["businessHours","businessHours",["jsObject","Array"]],["currentDate","currentDate",["DateTime","String"]],["enabled","enabled",["Boolean"]],["hiddenDays","hiddenDays",["Array"]],["navLinks","navLinks",["Boolean"]],["validRange","validRange",["jsObject"]],["value","value",["Array"]],["weekNumbers","weekNumbers",["Boolean"]],["view","view",["String"]]],carousel:[["pager","pager",["Boolean"]],["slides","slides",["Array"]],["value","value",["Number"]]],chart:[["chart type","chartType",["String"]],["chart values","chartValues",["Array"]],["chart labels","chartLabels",["Array"]],["segment labels","chartBarLabels",["Array"]],["localize numbers","numbersToLocale",["Boolean"]],["chart options","chartOptions",["jsObject"]],["chart fill colors","chartFillColors",["Array"]],["chart border colors","chartStrokeColors",["Array"]],["hover fill colors","chartHFillColors",["Array"]],["hover border colors","chartHStrokeColors",["Array"]],["point fill colors","chartPFillColors",["Array"]],["point border colors","chartPStrokeColors",["Array"]],["label","label",["String"]],["stepped line","chartSteppedLine",["Array"]],["hit radius","chartHitRadius",["Array"]],["hover radius","chartHoverRadius",["Array"]],["hover border widths","chartHBorderWidth",["Array"]]],checkbox:[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["value","value",["Boolean"]],["help text","help",["String"]],["read only","readonly",["Boolean"]],["tooltip-title","tooltip",["String"]]],"checkbox-custom":[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["read only","readonly",["Boolean"]],["value","value",["String"]],["tooltip-title","tooltip",["String"]]],collapsible:[["caption","caption",["String","Number","Boolean"]],["collapsed","collapsed",["Boolean"]],["enabled","enabled",["Boolean"]]],"collapsible-set":[["enabled","enabled",["Boolean"]]],container:[["content","content",["String"]]],"controlgroup-radio":[["enabled","enabled",["Boolean"]],["label","label",["String"]],["value","value",["String"]]],dataholder:[["read only","readonly",["Boolean"]],["value","value",["String"]]],datatable:[["column search","column_search",["jsObject"]],["enabled","enabled",["Boolean"]],["order","order",["Array"]],["page","page",["Number"]],["table search","table_search",["String"]],["selected rows","selected_rows",["Array"]],["tooltip-title","tooltip",["String"]],["value","value",["Array"]]],datatable_header:[["caption","caption",["String"]],["value","value",["String"]]],"datetime-input":[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["read only","readonly",["Boolean"]],["label","label",["String"]],["value","value",["DateTime"]],["minDate","minDate",["DateTime"]],["maxDate","maxDate",["DateTime"]],["enabledDates","enabledDates",["Array"]],["disabledDates","disabledDates",["Array"]],["enabledHours","enabledHours",["Array"]],["disabledHours","disabledHours",["Array"]],["placeholder","placeholder",["String"]],["tooltip-title","tooltip",["String"]],["help text","help",["String"]]],"dual-range-input":[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["max","max",["Number"]],["min","min",["Number"]],["step","step",["Number"]],["value","value",["jsObject"]],["tooltip-title","tooltip",["String"]]],expandable:[["enabled","enabled",["Boolean"]],["expanded","expanded",["Boolean"]]],flipswitch:[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["read only","readonly",["Boolean"]],["value","value",["Boolean"]],["tooltip-title","tooltip",["String"]]],"flipswitch-custom":[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["read only","readonly",["Boolean"]],["value","value",["String"]],["tooltip-title","tooltip",["String"]]],footer:[],fragment:[["content","content",["String"]]],google_map:[["locations","locations",["String","Array","jsObject"]],["zoom","zoom",["Number"]],["height","height",["Number"]],["mapType","mapType",["String"]]],google_map_streetview:[["locations","locations",["String","Array","jsObject"]],["zoom","zoom",["Number"]],["height","height",["Number"]],["mapType","mapType",["String"]]],grid:[],grid12:[],header:[],icon:[["aria label","aria-label",["String"]],["context","context",["String"]],["icon","icon",["String"]],["tooltip-title","tooltip",["String"]]],"fa-icon":[["aria label","aria-label",["String"]],["context","context",["String"]],["icon","icon",["String"]],["tooltip-title","tooltip",["String"]]],iframe:[],image:[["aria label","aria-label",["String"]],["image","image",["String"]],["tooltip-title","tooltip",["String"]]],"input-color":cTextInputProperties,"input-date":cTextInputProperties,"input-datetime":cTextInputProperties,"input-datetime-local":cTextInputProperties,"input-email":cTextInputProperties,"input-file":[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["files","files",["Array"]],["label","label",["String"]],["tooltip-title","tooltip",["String"]]],"input-hidden":[["value","value",["String","Number","Boolean"]]],"input-month":cTextInputProperties,"input-number":cTextInputProperties,"input-password":cTextInputProperties,"input-search":cTextInputProperties,"input-tel":cTextInputProperties,"input-text":cTextInputProperties,"input-time":cTextInputProperties,"input-url":cTextInputProperties,"input-week":cTextInputProperties,layout_list:[["all selected records by ID","asr_id",["Array"]],["all selected records by index","asr_index",["Array"]],["first selected record by ID","fsr_id",["String"]],["first selected record by index","fsr_index",["Number"]],["all visible records by ID","avr_id",["Array"]],["all visible records by index","avr_index",["Array"]],["read only","readonly",["Boolean"]],["page","page",["Number"]],["value","value",["Array"]]],layout_record:[["list index","listindex",["Number"]],["read only","readonly",["Boolean"]],["value","value",["jsObject"]]],link:[],listitem:[["header","header",["String"]],["caption","caption",["String"]],["aside","aside",["String"]],["tooltip","tooltip",["String"]],["aria label","aria-label",["String"]]],listview:[["list items","list_items",["Array"]]],main:[["title","title",["String"]]],navbar:[["aria label","aria-label",["String"]]],"number-input":[["suffix","suffix",["String","Number"]],["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["help text","help",["String"]],["label","label",["String"]],["placeholder","placeholder",["String"]],["prefix","prefix",["String","Number"]],["tooltip-title","tooltip",["String"]],["value","value",["String","Number"]],["min","min",["Number"]],["max","max",["Number"]],["decimals","decimals",["Number"]]],"otp-icon":[["aria label","aria-label",["String"]],["icon","icon",["String"]],["tooltip-title","tooltip",["String"]]],page:[],panel:[["context","context",["String"]],["enabled","enabled",["Boolean"]],["header","header",["String","Number","Boolean"]],["footer","footer",["String","Number","Boolean"]]],popup:[],progress:[["value","value",["Number"]],["max","max",["Number"]],["tooltip-title","tooltip",["String"]]],radiobutton:[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["read only","readonly",["Boolean"]],["value","value",["Boolean"]],["tooltip-title","tooltip",["String"]]],"range-input":[["aria label","aria-label",["String"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["max","max",["Number"]],["min","min",["Number"]],["step","step",["Number"]],["value","value",["Number"]],["tooltip-title","tooltip",["String"]]],report_container:[],"rich-text":[["aria label","aria-label",["String"]],["read only","readonly",["Boolean"]],["value","value",["String"]]],section:[],selectmenu:[["aria label","aria-label",["String"]],["display","display",["String","Array"]],["enabled","enabled",["Boolean"]],["label","label",["String"]],["options","options",["Array"]],["placeholder","placeholder",["String"]],["search","search",["String"]],["read only","readonly",["Boolean"]],["value","value",["String","Array"]],["tooltip-title","tooltip",["String"]],["help text","help",["String"]]],splitter:[],tabbar:[],tabitem:[["active","active",["Boolean"]],["caption","caption",["String"]],["enabled","enabled",["Boolean"]]],"tag-hr":[],"telekom-icon":[["aria label","aria-label",["String"]],["context","context",["String"]],["icon","icon",["String"]],["tooltip-title","tooltip",["String"]]],text:[["clickable","clickable",["Boolean"]],["context","context",["String"]],["label","label",["String"]],["text","text",["String","Number","Boolean"]],["tooltip-title","tooltip",["String"]]],"textarea-input":cTextInputProperties,timeline:[["selection","selection",["Array"]],["center","center",["String","DateTime"]],["range","range",["jsObject"]],["items","items",["Array"]],["groups","groups",["Array"]],["options","options",["jsObject"]]],treeview:[["value","value",["Array"]]],"Youtube-Embed":[]};var cButtonContextClasses=["btn-default","btn-primary","btn-success","btn-info","btn-warning","btn-danger","btn-link"];var cInputContainerContextClasses=["has-success","has-warning","has-error"];var cPanelContextClasses=["panel-primary","panel-success","panel-info","panel-warning","panel-danger"];var cTextContextClasses=["text-primary","text-success","text-info","text-warning","text-danger","text-muted"];var cListItemContextClasses=["list-group-item-success","list-group-item-secondary","list-group-item-info","list-group-item-warning","list-group-item-danger","list-group-item-primary","list-group-item-dark","list-group-item-light"];var cBadgeContextClasses=["badge-default","badge-primary","badge-success","badge-info","badge-warning","badge-danger"];var cDisablableControlsSelector='.mdl-slider,button,input,select,table,textarea,[ctrl_type="collapsible-set"],[ctrl_type="controlgroup-radio"],[ctrl_type="ctr-calendar"],[ctrl_type="expandable"],[ctrl_type="panel"],[ctrl_type="tabitem"]';var cReadOnlyControlsSelector='input:not([type=range]):not(.ll-filter),textarea,[ctrl_type="rich-text"],[ctrl_type="selectmenu"]';var cLocalizableProperties=["caption","label","help","tooltip","placeholder","header","footer","text","aria-label","title"];function GetControlValue(b,a){return GetControlProp(b,a)}function GetControlProp(c,g){var o=undefined;if(!c){return o}if(c=="?"){return o}var u;var v;var d;var y="";if(c.indexOf(".")>-1){y="#"+c.substring(0,c.indexOf("."));c=c.split(".").pop();u=$(y+" th#"+c);d="datatable_header"}else{u=$("#"+c+":not(th)");if(u.length===0){u=$("#"+c)}d=Control_type_of_$(u)}if(u.length==0&&y==""){RunTimeError("GetControlProp: #"+c+" does not exist.");return""}if(u.length>1){RunTimeError("GetControlProp: Multiple controls with same ID #"+c);return null}switch(g){case"aria-label":return u.attr(g);case"mask":return u.inputmask("getmetadata");case"visible":switch(d){case"listitem":if(u.is("li")){return !u.hasClass("hidden")}else{return !u.parent().hasClass("hidden")}case"carousel":case"range-input":case"dual-range-input":case"selectmenu":case"datetime-input":return !u.closest("div.visible-wrapper").hasClass("hidden");case"datatable_header":return !!u.length&&!u.hasClass("hidden")&&$(y).DataTable().column("#"+c).visible();case"collapsible":return !u.closest(".panel").hasClass("hidden");default:return !u.hasClass("hidden")}case"tooltip":switch(d){case"flipswitch":return $('span[data-for="'+c+'"]').attr("data-original-title");case"range-input":return u.closest("div.visible-wrapper").attr("data-original-title");case"listitem":return u.is("li")?u.attr("data-original-title"):u.closest("li").attr("data-original-title");default:return u.attr("data-original-title")}case"label":if(d=="controlgroup-radio"){return $('div[id="'+c+'"] legend').clone().children().remove().end().text()}else{if(d=="flipswitch"){return $('span[for="'+c+'"]').text()}else{return $('label[for="'+c+'"]').clone().children().remove().end().text()}}case"context":var t="default";if(d=="button"||d=="dropdown_button"){$.each(cButtonContextClasses,function(i,w){if(u.hasClass(w)){t=w.substr(4)}});return t}else{if(d=="panel"){$.each(cPanelContextClasses,function(i,w){if(u.hasClass(w)){t=w.substr(6)}});return t}else{if(d.substr(0,6)=="input-"||d=="textarea-input"){$.each(cInputContainerContextClasses,function(i,w){if(u.closest(".form-group").hasClass(w)){t=w.substr(4)}});return t}else{if(d=="text"||d=="icon"||d=="fa-icon"||d=="otp-icon"||d=="telekom-icon"){t="default";$.each(cTextContextClasses,function(i,w){if(u.hasClass(w)){t=w.substr(5)}});return t}else{if(d=="badge"||d=="badge-properties"){$.each(cBadgeContextClasses,function(i,w){if(u.hasClass(w)){t=w.substr(6)}});return t}}}}}RunTimeError("GetControlProp: "+d+"."+g+" is not handled for #"+c);return t;case"suggestions":o=[];$('li[data-for="'+c+'"] h4').each(function(){o.push($(this).text())});return o;case"prefix":var B=u.parent().find("._sys_input_prefix");if(B[0]){if($(B).find(".dropdown-toggle")[0]){return $(B).find(".dropdown-toggle").attr("data-value")}else{return $(B).text()}}else{return""}case"suffix":var m=u.parent().find("._sys_input_affix");if(m[0]){if($(m).find(".dropdown-toggle")[0]){return $(m).find(".dropdown-toggle").attr("data-value")}else{return $(m).text()}}else{return""}}switch(d){case"button":case"dropdown_button":switch(g){case"caption":case"text":return u.clone().children().remove().end().text();case"enabled":return !u.attr("disabled");case"icon":if(u.find("i").hasClass("material-icons")){return u.find("i").text()}var a=u.find("i").attr("class")||"";var A=a.split(" ");for(v in A){if(A[v].substr(0,9)=="otp-snap-"){return A[v].substr(9)}}if(A[v].substr(0,7)=="t-icon-"){return A[v].substr(7)}return""}break;case"badge":case"badge-properties":switch(g){case"text":return u.text()}case"chart":if(cControlProperties.chart.some(function(i){return i[1]==g})){return GetChartProperty(c,g)}break;case"treeview":switch(g){case"value":var D=u.data("value");u.find("li").each(function(){var G=$(this);var w=Number(G.attr("data-index"));var H=G.hasClass("closed");D[w].closed=H});return D}break;case"carousel":switch(g){case"pager":return u.hasClass("bxslider-pager");case"slides":o=[];u.find("li").not(".bx-clone").find("img").each(function(w,H){var G=H.src.indexOf("get_image.php?img=")>=0?H.src.match(/=([0-9]+)$/)[0].replace("=",""):H.src;o.push(G)});return o;case"value":return(u.data("carouselObject")).getCurrentSlide()+1}break;case"checkbox-custom":case"flipswitch-custom":switch(g){case"enabled":return !u.attr("disabled");case"readonly":return !!u.attr("disabled");case"value":if(u.prop("checked")){return u.attr("data-on-value")}else{return u.attr("data-off-value")}}break;case"container":switch(g){case"content":return u.attr("page_id")}break;case"checkbox":switch(g){case"enabled":return !u.attr("disabled");case"readonly":return !!u.attr("disabled");case"value":return u.prop("checked");case"help":return u.attr("data-help-text")}break;case"flipswitch":case"radiobutton":switch(g){case"enabled":return !u.attr("disabled");case"readonly":return !!u.attr("disabled");case"value":return u.prop("checked")}break;case"collapsible":switch(g){case"caption":return u.parent().find('a[href="#'+c+'"]').text();case"collapsed":return !u.hasClass("in");case"enabled":return $(u.data("parent")).find('a[href="#'+c+'"]').is("[data-toggle]")}break;case"main":switch(g){case"title":return u.attr("data-page_title")}break;case"advsection":case"collapsible-set":switch(g){case"enabled":return !u.hasClass("ui-state-disabled")&&!u.hasClass("snap-disabled");case"readonly":return u.hasClass("snap-readonly");case"hollowed":return !!u.data("stash")}break;case"expandable":switch(g){case"collapsed":case"expanded":return u.hasClass("open");case"enabled":return !u.hasClass("disabled")}break;case"controlgroup-radio":switch(g){case"enabled":return !u.hasClass("ui-state-disabled");case"readonly":return u.hasClass("snap-readonly");case"value":o=null;u.find('input[type="radio"]').each(function(){if($(this).prop("checked")){o=this.value;return false}return true});return o}break;case"fragment":switch(g){case"content":return u.html()}break;case"icon":switch(g){case"icon":return u.text()}break;case"otp-icon":switch(g){case"icon":return u.attr("class").match(/ otp-[^ ]+/)[0].replace(/ (otp-|snap-)*/,"")}break;case"telekom-icon":switch(g){case"icon":return u.attr("class").match(/ t-icon-[^ ]+/)[0].replace(/ (t-icon-)*/,"")}break;case"fa-icon":switch(g){case"icon":return u.attr("class").match(/ fa-[^ ]+/)[0].replace(/ (fa-)*/,"")}break;case"input-file":switch(g){case"enabled":return !u.attr("disabled");case"files":o=[];var h=u.prop("files");for(v=0;v<h.length;v++){o.push({name:String(h[v].name),size:h[v].size,type:h[v].type,lastModified:h[v].lastModified,lastModifiedDate:h[v].lastModifiedDate})}return o}break;case"input-color":case"input-date":case"input-datetime":case"input-datetime-local":case"input-month":case"input-number":case"input-tel":case"input-time":case"input-search":case"input-url":case"input-week":switch(g){case"enabled":return !u.attr("disabled");case"placeholder":return u.attr("placeholder");case"readonly":return !!u.attr("readonly");case"value":return u.val();case"help":return u.attr("data-help-text")}break;case"number-input":switch(g){case"enabled":return !u.attr("disabled");case"placeholder":return u.attr("placeholder");case"readonly":return !!u.attr("readonly");case"value":var p=u.attr("data-thousand-sep");var k=u.attr("data-decimal-sep");var e=NumberSeparator("decimal");var F=u.attr("data-decimals");var C=u.attr("data-zero-on-empty");if(p=="none"){p=""}if(p=="space"){p=" "}var l=NumberSeparator("decimal");var x=NumberSeparator("group");E=u.val();if(E.charAt(0)==e){E="0"+E}E=E.replaceAll(x,p);E=E.replaceAll(l,k);if(E==""&&C){E="0"}return E;case"min":return u.attr("data-min")?u.attr("data-min"):"";case"max":return u.attr("data-max")?u.attr("data-max"):"";case"decimals":return u.attr("data-decimals")?u.attr("data-decimals"):"";case"help":return u.attr("data-help-text")}break;case"datetime-input":switch(g){case"enabled":return !u.attr("disabled");case"readonly":return !!u.attr("readonly");case"value":var b=u.attr("data-io-format");if(b=="default"){return u.parent().data("DateTimePicker").date()!=null?u.parent().data("DateTimePicker").date().toDate():""}else{return u.parent().data("DateTimePicker").date()!=null?u.parent().data("DateTimePicker").date().format(b):""}case"minDate":return u.parent().data("DateTimePicker").minDate()?u.parent().data("DateTimePicker").minDate().toDate():null;case"maxDate":return u.parent().data("DateTimePicker").maxDate()?u.parent().data("DateTimePicker").maxDate().toDate():null;case"enabledDates":return u.parent().data("DateTimePicker").enabledDates();case"disabledDates":return u.parent().data("DateTimePicker").disabledDates();case"enabledHours":return u.parent().data("DateTimePicker").enabledHours();case"disabledHours":return u.parent().data("DateTimePicker").disabledHours();case"placeholder":return u.attr("placeholder");case"help":return u.attr("data-help-text")}break;case"ctr-calendar":switch(g){case"enabled":return !u.hasClass("ui-state-disabled");case"value":return ProcessCalEvents(u.fullCalendar("clientEvents"),false);case"currentDate":return u.fullCalendar("getDate").toDate();case"hiddenDays":case"businessHours":case"weekNumbers":case"validRange":case"navLinks":return u.fullCalendar("option",g);case"view":return u.fullCalendar("getView").type}break;case"rich-text":switch(g){case"readonly":return u.hasClass("snap-readonly");case"value":return u.data("ckeditor").getData()}break;case"image":switch(g){case"image":return DelPrefix("get_image.php?img=",u.attr("src"))}break;case"layout_list":o=[];switch(g){case"asr_id":case"fsr_id":$("#"+c+" > .ll-row-selected").each(function(i,w){o.push(w.id)});return(g=="asr_id")?o:o[0];case"asr_index":case"fsr_index":$("#"+c+" > .ll-row-selected").each(function(i,w){o.push(Number($(w).attr("_sys_listindex")))});return(g=="asr_index")?o:o[0];case"avr_id":case"avr_index":u.children(".list-group-item:not(.hidden-pagination)").not(".hidden-filter").not("._sys_list_template").each(function(i,w){if(g==="avr_id"){o.push(w.id)}else{o.push(w.getAttribute("_sys_listindex"))}});return o;case"page":return Number(u.attr("data-current-page"))||1;case"readonly":return u.hasClass("snap-readonly");case"value":o=[];if(u.attr("data-lazy")){SaveLazyLayoutListValue(u);o=JSON.parse(JSON.stringify(u.data("complete-value")));for(v=0;v<o.length;v++){if(typeof o[v]["_sys_index"]!=="undefined"){delete o[v]["_sys_index"]}}}else{EnumerateSubs(u.children(),function(w,i){o.push(i)})}return o}break;case"layout_record":switch(g){case"listindex":return u.attr("_sys_listindex");case"readonly":return u.hasClass("snap-readonly");case"value":o={};EnumerateSubs($("#"+c+" *[ctrl_type]"),function(w,i){o[w]=i});return o}break;case"panel":switch(g){case"enabled":return !u.hasClass("ui-state-disabled");case"header":return u.children(".panel-heading").find(".panel-title").text();case"footer":return u.children(".panel-footer").text()}break;case"range-input":switch(g){case"enabled":return !u.attr("disabled");case"max":case"min":case"step":return parseInt(u.attr(g));case"value":return parseInt(u.val())}break;case"dual-range-input":switch(g){case"min":return u.data("ionRangeSlider").options.min;case"max":return u.data("ionRangeSlider").options.max;case"step":return u.data("ionRangeSlider").options.step;case"enabled":return !u.data("ionRangeSlider").options.block;case"value":var E=u.prop("value").split(";");return{low:E[0],high:E[1]}}break;case"selectmenu":switch(g){case"display":if(!u.attr("multiple")){return u.children("option[value="+JSON.stringify(u.val())+"]").text()||null}o=[];var s=u.val();for(v in s){o.push(u.children("option[value="+JSON.stringify(s[v])+"]").text())}return o;case"enabled":return !u.attr("disabled");case"readonly":return !!u.attr("disabled");case"options":return SelectMenuOptionsToArray(c);case"search":var f=u.filter("[data-livesearch]").closest(".bootstrap-select").find(".bs-searchbox>input:visible");return f.length>0?f.val():null;case"placeholder":return u.children('option[data-placeholder="true"]').text();case"help":return u.attr("data-help-text");case"value":return u.val()}break;case"datatable":switch(g){case"column_search":var r=u.children("thead").children("tr").eq(0);var q=u.children("thead").children("tr").eq(1);if(q.length==0){return}o={};r.children("th[id]").each(function(i,G){var w=q.children("td").eq(i).find("input,select");if(w.length>0&&w.val()!==""&&w.val()!==null){o[G.id]=w.val()}});return o;case"enabled":return !u.attr("disabled");case"order":return u.DataTable().order();case"page":return 1+u.DataTable().page();case"selected_rows":return u.DataTable().rows({selected:true}).data().toArray();case"table_search":return u.DataTable().search();case"value":return u.DataTable().data().toArray()}break;case"datatable_header":switch(g){case"value":case"caption":return u.text()}break;case"text":switch(g){case"caption":case"text":return u.text();case"clickable":return u.hasClass("snap_clickable_text")}break;case"dataholder":case"input-email":case"input-hidden":case"input-password":case"input-text":case"textarea-input":switch(g){case"enabled":return !u.attr("disabled");case"placeholder":return u.attr("placeholder");case"readonly":return !!u.attr("readonly");case"value":return GetTextFieldValue(c);case"help":return u.attr("data-help-text")}break;case"progress":if(!u.hasClass("progress")){return u.prop(g)}switch(g){case"value":return parseInt(u.children(".progress-bar").attr("aria-valuenow"));case"max":return parseInt(u.children(".progress-bar").attr("aria-valuemax"))}break;case"tabitem":switch(g){case"active":return u.hasClass("active")||u.hasClass("ui-tabs-active");case"caption":return u.children("a").text();case"enabled":return !u.hasClass("disabled")}break;case"timeline":switch(g){case"selection":return u.data("timelineObject").getSelection();case"center":var n=u.data("timelineObject").getWindow();return new Date(n.start.getTime()+(n.end-n.start)/2);case"range":return u.data("timelineObject").getWindow();case"items":return u.data("timelineItems");case"groups":return u.data("timelineGroups");case"options":return u.data("timelineOptions")}break;case"google_map":switch(g){case"locations":if(u[0].gMap&&u[0].gMap.markerParameters){var z=[];for(v=0;v<u[0].gMap.markerParameters.length;v++){z[u[0].gMap.markerParameters[v].order]={address:u[0].gMap.markerParameters[v].address,latitude:u[0].gMap.markerParameters[v].latitude,longitude:u[0].gMap.markerParameters[v].longitude,infowindow:u[0].gMap.markerParameters[v].infowindow,markertype:u[0].gMap.markerParameters[v].markertype}}return z}return[];case"height":return(u[0].gMap)?parseInt(u[0].gMap.getDiv().offsetHeight):0;case"zoom":return(u[0].gMap)?parseInt(u[0].gMap.getZoom()):0;case"mapType":return(u[0].gMap)?u[0].gMap.mapTypeId:""}break;case"google_map_streetview":switch(g){case"locations":if(u[0].gMap){return{latitude:u[0].gMap.getPosition().lat(),longitude:u[0].gMap.getPosition().lng()}}else{return u.data("location")}case"height":return(u[0].gMap)?parseInt(u[0].offsetHeight):u.data("height");case"zoom":return(u[0].gMap)?parseInt(u[0].gMap.getZoom()):u.data("zoom");case"mapType":return(u[0].gMap)?u[0].gMap.mapTypeId:u.data("type")}break;case"listview":switch(g){case"list_items":return ListViewToArray(u)}break;case"listitem":switch(g){case"header":return u.children("h4").text()||"";case"caption":return u.children("p").text()||"";case"aside":if(u.is("li")){return u.children("span").text()}else{return u.prev("span").text()}}}RunTimeError("GetControlProp: "+d+"."+g+" is not handled for #"+c);return""}function EnumerateSubs(a,c){var e=1;while(a.length){var d=a[0];var f=d.getAttribute("ctrl_type");if(!d.classList.contains("_sys_list_template")){var b=ReplaceValueProp(f,"value");if(ControlTypeHasProp(f,b)){c(d.getAttribute("layout_record_field_name")||d.getAttribute("id"),GetControlProp(d.id,b));e++}if(f=="layout_list"||f=="layout_record"){a=a.not("#"+d.id+" *[ctrl_type]")}}a=a.not(d)}}function ReplaceValueProp(a,b){switch(a){case"image":return"image";case"button":case"dropdown_button":case"text":case"badge":return"text";case"collapsible":case"tabitem":return"caption";case"fragment":return"content";case"icon":case"fa-icon":return"icon";case"chart":return"chartValues";default:return b}}function OptionsHasProperty(d,c){var b=0,a=d.length;for(;b<a;b++){if(d[b][1]==c){return true}}return false}function ControlTypeHasProp(a,b){return cControlProperties[a]&&OptionsHasProperty(cControlProperties[a],b)}function SetLayoutListBusyState(b,a){if(b.attr("data-lazy")){b.children("._sys_lazy_render_placeholder").remove();if(a){$("<img>").addClass("_sys_list_control").addClass("_sys_lazy_render_placeholder").attr("src","images/loader.gif").appendTo(b)}b.children(".list-controls-bottom").toggleClass("hidden",a)}}function ClearLayoutListElements(a){a.children().not("._sys_list_template").not("._sys_list_control").remove();if(a.attr("data-size")==="cards"){a.removeClass("snap-card-"+a.attr("data-card-number-current")).addClass("snap-card-"+a.attr("data-card-number")).attr("data-card-number-current",a.attr("data-card-number"))}SetLayoutListBusyState(a,true)}function AddLayoutListElements(e,h){var r=e;var n=r.children("._sys_list_template");var w=n.find("[name]").length,y=n.find("label[for]").length,z=n.find('[id^="'+cInvalidationMessagePrefix+'"]').length,m=n.find("input[aria-describedby]").length,v=n.find('[data-toggle="collapse"]').length,a=n.find("div[data-parent]").length,i=n.find("table").length,d=n.find("canvas[ctrl_type=chart]").length,o=n.find('div[ctrl_type="pivot_table"]').length,p=n.find('div[ctrl_type="google_map"], div[ctrl_type="google_map_streetview"]').length,t=n.find("div.date").length,u=n.find("a[role=tab]").length,s=n.find('[data-tooltip="true"],[data-toggle="tooltip"]').length,x=n.find("[ctrl_type=layout_list],[ctrl_type=layout_record]").length;var k=$([]);var q;if(!n.attr("layout_record_field_name")){n.find("[ctrl_type][id]").each(function(){var A=$(this);if(!A.attr("layout_record_field_name")){A.attr("layout_record_field_name",A.attr("id"))}});n.attr("layout_record_field_name",n.attr("id"));n.find("input[data-inputmask]").inputmask("remove");if(n.find("[ctrl_type=chart]").length>0){n.find("[ctrl_type=chart]").each(function(){if($(this).data("chartObject")){$(this).data("chartObject").destroy();$(this).data("chartObject",undefined)}})}}for(var g=1;g<=h;g++){var b=n.clone(true);b.removeClass("_sys_list_template");b.addClass(cInListClass);var c=AddPrefix(cListItemPrefix,g_nextListItemIndex++);b.attr("id",c).attr("_sys_listindex",g);var f=b.find("[ctrl_type]");if(x){f=f.add(b.find(".sys_list_control select")).not(b.find("[ctrl_type=layout_list] *, [ctrl_type=layout_record] *"))}f.each(function(){var G=this.id;var B=AddPrefix(c+"_",G);if(G){this.id=B}if(w){b.find('[name="'+G+'"]').attr("name",B)}if(y){b.find('label[for="'+G+'"]').attr("for",B)}if(z){b.find("#"+AddPrefix(cInvalidationMessagePrefix,G)).attr("id",AddPrefix(cInvalidationMessagePrefix,B))}if(m){b.find('input[aria-describedby="'+AddPrefix(cInvalidationMessagePrefix,G)+'"]').attr("aria-describedby",AddPrefix(cInvalidationMessagePrefix,B))}if(v){b.find('a[data-toggle="collapse"][href="#'+G+'"]').attr("href","#"+B)}if(a){b.find('div[data-parent="#'+G+'"]').attr("data-parent","#"+B)}if(u){b.find('[id="ui-id-'+G+'"]').attr("id","ui-id-"+B);b.find('a[role=tab][href="#ui-id-'+G+'"]').attr("href","#ui-id-"+B)}if(this.tagName==="SELECT"){var F=$(this);var E=F.data("selectpicker");if(E){if(E.destroyLi){E.destroyLi()}E.$button.hide();var D=E.options;var A=$.fn.selectpicker.Constructor;var C=$.extend({},A.DEFAULTS,$.fn.selectpicker.defaults||{},F.data(),D);C.template=$.extend({},A.DEFAULTS.template,$.fn.selectpicker.defaults?$.fn.selectpicker.defaults.template:{},F.data().template,D.template);F.data("selectpicker",new A(this,C,null));F.parent().parent().children("button").hide()}}});k=k.add(b)}if(s){k.find('[data-tooltip="true"],[data-toggle="tooltip"]').not("[ctrl_type=layout_list] *").tooltip()}if(t){k.find("div.date").trigger("initDTP")}r.append(k);r.children("."+cInListClass+":nth-child(even)").addClass("even");if(r.attr("data-size")==="cards"){q=Number(r.attr("data-card-number"));r.removeClass("snap-card-"+e.attr("data-card-number-current"));var l=r.children("."+cInListClass).length;if(l>0&&l<q){r.addClass("snap-card-"+l).attr("data-card-number-current",l)}else{r.addClass("snap-card-"+q).attr("data-card-number-current",q)}}r.children(".list-controls-bottom").detach().appendTo(r);if(i){k.find("table").not("._sys_list_template *").trigger("initDT",[null,null,null])}if(d){k.find("canvas[ctrl_type=chart]").trigger("initCHART")}if(o){k.find('div[ctrl_type="pivot_table"]').trigger("initPivots")}if(p){k.find('div[ctrl_type="google_map"], div[ctrl_type="google_map_streetview"]').trigger("initMaps")}k.find("input[data-inputmask]").inputmask()}function SetLayoutListElements(b,c,e){var a=b.children("div."+cInListClass).slice(e||0);var f=b;var d=f.attr("layout_record_field_name")||f.attr("id");a.each(function(k,h){var m=c[k];var l=$(h);var g=l.attr("id");if(m!==undefined){SetControlProp(g,"value",m);if(m&&m._sys_index!==undefined){l.attr("_sys_listindex",m._sys_index+1)}l.removeClass("hidden")}else{l.removeAttr("_sys_listindex");l.addClass("hidden")}});a.filter("[_sys_listindex]").each(function(){f.trigger(AddPrefix(cAfterAppendRecordEventPrefix,d),$(this).attr("id"))})}function GetFilteredLayoutListValue(k){var g=String.prototype.toLocaleUpperCase||String.prototype.toUpperCase;var f=$("#"+k.attr("id")+"-filter");var a=(g.apply(f.val().trim()||"")).split(" ");var d=k.data("complete-value");var b=[];var e;var h,c;if(a.length===0){return b}for(e=0;e<d.length;e++){h=true;for(j=0;j<a.length;j++){c=false;Object.keys(d[e]).forEach(function(i){if(g.apply(d[e][i].toString()).indexOf(a[j])>=0){c=true}return !c});if(!c){h=false;break}}if(h){b.push(d[e]);b[b.length-1]["_sys_index"]=e}}return b}function SaveLazyLayoutListValue(b){if(!b.attr("data-lazy")){return}var a=b.children("div."+cInListClass);var c=b.data("completeValue");a.each(function(e,d){var f=$(d);if(f.attr("_sys_listindex")===undefined){return false}var g=Number(f.attr("_sys_listindex"));c[g-1]=GetControlProp(f.attr("id"),"value");return true});b.data("completeValue",c)}function SetControlProp(o,T,J){if(!o){return}if(o=="?"){return}var u;var aa;var am="";if(o.indexOf(".")>-1){am="#"+o.substring(0,o.indexOf("."));o=o.split(".").pop();aa=$(am+" th#"+o);u="datatable_header"}else{aa=$("#"+o+":not(th)");if(aa.length===0){aa=$("#"+o)}u=aa.attr("ctrl_type")}var al;var ap;if(aa.length==0&&am==""){RunTimeError("SetControlProp: #"+o+" does not exist.");return}if(aa.length>1){RunTimeError("SetControlProp: Multiple controls with same ID #"+o);return}switch(T){case"aria-label":aa.attr(T,J);return;case"mask":aa.removeAttr("data-inputmask");if(J=="remove"){window.setTimeout(function(){aa.inputmask(J)},0)}aa.inputmask(J);return;case"visible":switch(u){case"range-input":case"selectmenu":aa.closest("div.visible-wrapper").toggleClass("hidden",!J);return;case"carousel":aa.closest("div.visible-wrapper").toggleClass("hidden",!J);RecalcControls(aa,!J);return;case"datatable":aa.parents("div.dataTables_wrapper").first().toggleClass("hidden",!J);aa.toggleClass("hidden",!J);RecalcControls(aa,!J);return;case"datatable_header":var af=am?$(am):aa.parents("table").first();aa.removeClass("hidden");$(af.DataTable().column("#"+o).nodes()).removeClass("hidden");af.DataTable().column("#"+o).visible(J,false);RecalcControls(aa,false);return;case"listitem":if(aa.is("li")){aa.toggleClass("hidden",!J)}else{aa.parent().toggleClass("hidden",!J)}return;case"listview":case"tabbar":if(aa.next().hasClass("tab-content")){aa.next().toggleClass("hidden",!J)}aa.toggleClass("hidden",!J);RecalcControls(aa,!J);return;case"tabitem":if(!J&&(aa.hasClass("active")||aa.hasClass("ui-state-active"))){var av=aa.prevAll().not(".hidden").last();if(!av.length){av=aa.nextAll().not(".hidden").first()}if(av.length){SetControlProp(av.attr("id"),"active",true)}}aa.toggleClass("hidden",!J);$("#ui-id-"+o).toggleClass("hidden",!J);if(J&&aa.parent().children().not(".hidden").length==1){SetControlProp(o,"active",true)}return;case"radiobutton":aa.parent(".radio").toggleClass("hidden",!J);case"button":case"dropdown_button":$('label[for="'+o+'"], #'+o).toggleClass("hidden",!J);return;default:$('label[for="'+o+'"], #'+o).toggleClass("hidden",!J);aa.closest("div.visible-wrapper").toggleClass("hidden",!J);$("#"+cInvalidationMessagePrefix+o).toggleClass("hidden",!J);switch(u){case"collapsible":aa.closest(".panel").toggleClass("hidden",!J);break;case"google_map_streetview":if(J){window.dispatchEvent(new Event("resize"))}break}RecalcControls(aa,!J);return}case"tooltip":switch(u){case"flipswitch":$('span[data-for="'+o+'"]').tooltip("hide").attr("data-original-title",J);return;case"checkbox":case"radiobutton":$('label[for="'+o+'"], #'+o).tooltip("hide").attr("data-original-title",J);return;case"range-input":aa.closest("div.visible-wrapper").tooltip("hide").attr("data-original-title",J);return;case"selectmenu":aa.tooltip("hide").attr("data-original-title",J);return;case"listitem":aa.is("li")?aa.attr("data-original-title",J):aa.closest("li").attr("data-original-title",J);return;default:aa.tooltip("hide").attr("data-original-title",J);return}case"label":switch(u){case"controlgroup-radio":$('div[id="'+o+'"] legend').text(J);return;case"flipswitch":case"flipswitch-custom":$('span[for="'+o+'"]').text(J);return;default:var an=$('label[for="'+o+'"]').first();var L=an.children();an.text(J).append(L);return}case"context":if(u=="button"||u=="dropdown_button"){aa.removeClass(cButtonContextClasses.join(" "));if(cButtonContextClasses.indexOf("btn-"+J)!==-1){aa.addClass("btn-"+J)}else{aa.addClass("btn-default")}return}else{if(u=="panel"){aa.removeClass(cPanelContextClasses.join(" "));if(cPanelContextClasses.indexOf("panel-"+J)!==-1){aa.addClass("panel-"+J)}else{aa.addClass("panel-default")}return}else{if(u.substr(0,6)=="input-"||u=="textarea-input"){aa.closest(".form-group").removeClass(cInputContainerContextClasses.join(" "));if(cInputContainerContextClasses.indexOf("has-"+J)!==-1){aa.closest(".form-group").addClass("has-"+J)}return}else{if(u=="text"||u=="icon"||u=="fa-icon"||u=="otp-icon"||u=="telekom-icon"){aa.removeClass(cTextContextClasses.join(" "));if(J==="default"||J===null){return}if(cTextContextClasses.indexOf("text-"+J)!==-1){aa.addClass("text-"+J);return}}else{if(u=="badge"||u=="badge-properties"){aa.removeClass(cBadgeContextClasses.join(" "));if(cBadgeContextClasses.indexOf("badge-"+J)!==-1){aa.addClass("badge-"+J)}else{aa.addClass("badge-default")}return}}}}}RunTimeError("SetControlProp: "+u+"."+T+" is not handled for #"+o);return;case"readonly":if(J&&aa.hasClass("invalidation_message")){SetInvalidationMessage2(o,false,null)}break;case"value":if(aa.hasClass("invalidation_message")){SetInvalidationMessage2(o,false,null)}break;case"suggestions":aa.attr("autocomplete","off").attr("autofill","off");aa.off("keydown",OnSuggestionPanelKeydown).off("focus",OnSuggestionInputBoxFocused).off("blur",OnSuggestionInputBoxBlurred);aa.parent().children("ul").remove();if(J&&J.length>0){var ah='<ul class="list-group suggestions" data-role="listview">';for(al=0;al<J.length;al++){ah+='<li class="list-group-item"><a href="#"><h4 class="list-group-item-text"></h4></a></li>'}ah+="</ul>";var at=$(ah);at.children().each(function(c,t){$(t).attr("data-for",o).find("h4").text(J[c])});at.children().first().addClass("ui-first-child");at.children().last().addClass("ui-last-child");at.appendTo(aa.parent());at.find("li").on("mousedown",function(){var c=$(this);$("#"+c.attr("data-for")).val(c.text()).trigger("change");c.closest("ul").hide();PerformClickOnShortcut("ENTER")});aa.on("keydown",OnSuggestionPanelKeydown).on("focus",OnSuggestionInputBoxFocused).on("blur",OnSuggestionInputBoxBlurred)}return;case"help":if(!J){if(!aa.is("[data-help-text]")){return}aa.closest(".form-group._sys_help").removeClass("_sys_help").find("a._sys_help").remove();aa.attr("data-help-text",null);return}if(!aa.is("[data-help-text]")){aa.closest(".form-group").addClass("_sys_help");(u==="selectmenu"||u==="datetime-input"?aa.parent().parent():aa.parent()).append('<a class="_sys_help" onclick="HelpMessageDlg(\''+o+"')\">?</a>")}aa.attr("data-help-text",J);return;case"suffix":aa.parent().addClass("input-group");var s=aa.parent().find("._sys_input_affix");if(s[0]){if(J==""){s[0].remove();if(!s[0]&&!aa.parent().find(".input-group-btn")[0]){aa.parent().removeClass("input-group")}}else{if(typeof J==="object"){if($(s).find(".dropdown-toggle")[0]){var S=$(s).find("ul")[0];$(S).empty();var Z,G;for(var y in J){Z=y;G=J[y];break}$(s).find(".dropdown-toggle").text(G+" ").append('<span class="caret">');$(s).find(".dropdown-toggle").attr("data-value",Z);$.each(J,function(i,c){var t=$('<li><a onclick="PrefSuffDropdownHandle(this)"></a></li>').find("a").attr("data-value",i).text(c);$(S).append(t)})}else{RunTimeError("Can't use object value for the prefix as it does not have a dropdown.")}}else{if($(s).find(".dropdown-toggle")[0]){var p=false;$(s).find("a").each(function(c,i){if($(i).attr("data-value")==J){$(i).trigger("click");p=true}});if(!p){RunTimeError("No matching value found in the prefix's dropdown.")}}else{$(s[0]).text(J)}}}}else{if(J!=""){$('<span class="input-group-addon _sys_input_affix"></span>').text(J).insertAfter(aa)}}aa.trigger("recalcWidth");return;case"prefix":aa.parent().addClass("input-group");var W=aa.parent().find("._sys_input_prefix");if(W[0]){if(J==""){W[0].remove();if(!W[0]&&!aa.parent().find(".input-group-btn")[0]){aa.parent().removeClass("input-group")}}else{if(typeof J==="object"){if($(W).find(".dropdown-toggle")[0]){var S=$(W).find("ul")[0];$(S).empty();var Z,G;for(var y in J){Z=y;G=J[y];break}$(W).find(".dropdown-toggle").text(G+" ").append('<span class="caret">');$(W).find(".dropdown-toggle").attr("data-value",Z);$.each(J,function(i,c){var t=$('<li><a onclick="PrefSuffDropdownHandle(this)"></a></li>').find("a").attr("data-value",i).text(c);$(S).append(t)})}else{RunTimeError("Can't use object value for the suffix as it does not have a dropdown.")}}else{if($(W).find(".dropdown-toggle")[0]){var p=false;$(W).find("a").each(function(c,i){if($(i).attr("data-value")==J){$(i).trigger("click");p=true}});if(!p){RunTimeError("No matching value found in the suffix's dropdown.")}}else{$(W[0]).text(J)}}}}else{if(J!=""){$('<span class="input-group-addon _sys_input_prefix"></span>').text(J).insertBefore(aa)}}aa.trigger("recalcWidth");return}switch(u){case"button":case"dropdown_button":switch(T){case"caption":case"text":var w=aa.children("span.caret");if(w.length>0){w.detach()}var r=aa.children();aa.text(J).prepend(r);aa.append(w);return;case"enabled":if(J){aa.tooltip("hide").removeClass("disabled").removeAttr("disabled")}else{aa.tooltip("hide").addClass("disabled").attr("disabled","disabled")}return;case"icon":var D=aa.find("i");if(D.length===0){return}if(D.hasClass("material-icons")){D.text(J);return}var l=D.attr("class").split(" ");for(al in l){if(l[al].substr(0,9)=="otp-snap-"||l[al].substr(0,3)=="fa-"){D.removeClass(l[al])}}if(D.hasClass("fa")){D.addClass("fa-"+J)}else{D.addClass("otp-snap-"+J)}return}break;case"badge":case"badge-properties":switch(T){case"text":aa.text(J);return}case"chart":if(cControlProperties.chart.some(function(c){return c[1]==T})){SetChartProperty(o,T,J,true)}return;case"treeview":switch(T){case"value":if(!$.isArray(J)){J=[]}aa.data("value",J);var R;for(al=0;al<J.length;al++){R=-1;for(var aj=0;aj<J.length;aj++){if(J[al].parent==J[aj].id&&!!J[al].parent&&!!J[aj].id){R=aj;break}}if(R<0){J[al].parent=null}}aa.children("ul").empty();var g=aa.attr("data-image-width");var X=aa.attr("data-branch-image");var Q=aa.attr("data-leaf-image");var ad=0;while(ad<J.length){for(al=0;al<J.length;al++){var aq;if(!J[al].parent){aq=aa}else{aq=aa.find("[data-id= "+JSON.stringify(J[al].parent)+"]")}if(aq.length<1){continue}if(aq.children("ul").children("[data-index="+al+"]").length>0){continue}var q=$("<img>").addClass("_sys_tree_image");if(J[al].image){q.attr("src","get_image.php?img="+J[al].image)}if(g){q.attr("style",(q.attr("style")||"")+" width: "+g+";")}var ac=$([]);if(J[al].aside){ac=$("<span>").addClass("badge").text(J[al].aside)}var N=$("<span>").append(q).append($("<span>").addClass("_sys_tree_branch_caption").text(J[al].caption||"")).append(ac);$("<li>").append(N).append($("<ul>")).attr("data-id",J[al].id).attr("data-index",al).toggleClass("closed",J[al].closed||false).addClass(J[al]["class"]||[]).appendTo(aq.children("ul"));ad++}}aa.find("li").each(function(){var i=$(this);var c=i.children("span").children("img");if(i.children("ul").children().length>0){i.addClass("_sys_tree_branch");if(X&&!c.attr("src")){c.attr("src","get_image.php?img="+X)}}else{i.addClass("_sys_tree_leaf");if(Q&&!c.attr("src")){c.attr("src","get_image.php?img="+Q)}}});return}break;case"carousel":var b;switch(T){case"pager":aa.toggleClass("bxslider-pager",J);b=aa.data("carouselSettings");b.pager=!!J;aa.data("carouselSettings",b);aa.data("carouselObject").reloadSlider(b);return;case"slides":b=aa.data("carouselSettings");aa.data("carouselObject").destroySlider();aa.empty();$.each(J,function(t,ax){var c=$("<li><img></li>");var ay=ax.src||ax;var aw=ax.alt||"";ay=ay.toString().match(/^[0-9]+$/)?AddPrefix("get_image.php?img=",ay):ay;c.children("img").attr("src",ay).attr("alt",aw).attr("title",aw);aa.append(c)});var ar=aa.bxSlider(b);aa.data("carouselObject",ar);return;case"value":if((J>0)&&(J<=aa.data("carouselObject").getSlideCount())){aa.data("carouselObject").goToSlide(J-1)}return}break;case"checkbox-custom":case"flipswitch-custom":switch(T){case"enabled":aa.tooltip("hide").prop("disabled",!J);return;case"readonly":SetControlProp(o,"enabled",!J);return;case"value":aa.prop("checked",J===aa.attr("data-on-value"));return}break;case"checkbox":case"radiobutton":case"flipswitch":switch(T){case"enabled":aa.tooltip("hide").prop("disabled",!J);return;case"readonly":SetControlProp(o,"enabled",!J);return;case"value":aa.prop("checked",AsBoolean(J));return}break;case"collapsible":switch(T){case"caption":case"text":aa.parent().find('a[href="#'+o+'"]').text(J);return;case"collapsed":if(!aa.hasClass("in")!=J){aa.closest(".panel").siblings().toggleClass("open",false);aa.closest(".panel").toggleClass("open",!J);aa.collapse({parent:aa.data("parent")}).collapse(J?"hide":"show")}return;case"enabled":if(J){$(aa.data("parent")).find('a[href="#'+o+'"]').attr("data-toggle","collapse")}else{$(aa.data("parent")).find('a[href="#'+o+'"]').removeAttr("data-toggle")}return}break;case"expandable":switch(T){case"collapsed":case"expanded":if(aa.hasClass("open")!=J){if(J){OpenExpandableSet(o)}else{CloseExpandableSet(o)}}return;case"enabled":aa.removeClass("disabled");if(!J){aa.addClass("disabled")}return}break;case"container":switch(T){case"content":DoAjaxCall2("qu_page.php",{PageID:J,into_page:GetUrlParam("page_id")},"POST",function(c){if((!c)||(c.indexOf("timeline")>=0)||(c.indexOf("ctr-calendar")>=0)||(c.indexOf("includeStream(")>=0)){if($.inArray("moment-with-locales",InitScriptsLoaded)==-1){$('<script src="../moment/moment-with-locales.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("moment-with-locales")}if($.inArray("vis.min",InitScriptsLoaded)==-1){$('<link rel="stylesheet" type="text/css" href="../vis/vis.min.css" >').appendTo("head");$('<script src="../vis/vis.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("vis.min")}if(c.indexOf("ctr-calendar")>=0){if($.inArray("fullcalendar.min",InitScriptsLoaded)==-1){$('<link href="../fullcalendar/fullcalendar.min.css" rel="stylesheet">').appendTo("head");$('<script src="../fullcalendar/fullcalendar.min.js"><\/script>').appendTo("head");$('<script src="../fullcalendar/locale-all.js"><\/script>').appendTo("head");$('<script>InitScriptsLoaded.push("fullcalendar.min");<\/script>').appendTo("head");InitScriptsLoaded.push("fullcalendar.min")}}}$("body").off(".SNAPSay@"+aa.attr("page_id"));$(aa).find("[ctrl_type='container']").each(function(aw,ax){$("body").off(".SNAPSay@"+ax.getAttribute("page_id"))});aa.html(c);aa.attr("page_id",J);try{if(aa.find('[ctrl_type="carousel"]').length>0){if($.inArray("jquery.bxslider",InitScriptsLoaded)==-1){$('<script src="../jquery/jquery.bxslider.min.js"><\/script>').appendTo("head");$('<link rel="stylesheet" type="text/css" href="../jquery/jquery.bxslider.min.css" >').appendTo("head");InitScriptsLoaded.push("jquery.bxslider")}}}catch(i){SnapSysError("Error in container - carousel",i)}try{if(aa.find('[ctrl_type="datetime-input"],[ctrl_type="timeline"],[ctrl_type="ctr-calendar"]').length>0){if($.inArray("moment-with-locales",InitScriptsLoaded)==-1){$('<script src="../moment/moment-with-locales.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("moment-with-locales")}}}catch(i){SnapSysError("Error in container - moment-with-locales",i)}try{if(aa.find('[ctrl_type="timeline"]').length>0){$('[ctrl_type="timeline"]').each(function(){try{var aw=new vis.Timeline($(this)[0],$(this).data("timelineItems"),$(this).data("timelineGroups"),$(this).data("timelineOptions"));$(this).data("timelineObject",aw);aw.setOptions({zoomable:false});if(navigator.userAgent.indexOf("MSIE")!==-1){aw.on("click",function(ay){if(ay.item){aw.setSelection([ay.item])}else{aw.setSelection([])}})}}catch(ax){SnapSysError("Error initializing .timeline#"+$(this).id+" ",ax)}})}}catch(i){SnapSysError("Error in container - timeline",i)}try{if(aa.find('[ctrl_type="rich-text"]').length>0){if($.inArray("ckeditor.min",InitScriptsLoaded)==-1){$('<script src="../ckeditor/ckeditor.js"><\/script>').appendTo("head");InitScriptsLoaded.push("ckeditor.min")}}}catch(i){SnapSysError("Error in container - rich-text",i)}try{if(aa.find('[ctrl_type="datatable"]').length>0){if($.inArray("datatables",InitScriptsLoaded)==-1){$('<script src="../DataTables/datatables.min.js"><\/script>').appendTo("head");$('<link rel="stylesheet" type="text/css" href="../DataTables/datatables.min.css" >').appendTo("head");$('<script src="../DataTables/buttons.print.min.js"><\/script>').appendTo("head");$('<script src="../DataTables/jszip.min.js"><\/script>').appendTo("head");$('<script src="../DataTables/buttons.html5.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("datatables")}aa.find("table").not("._sys_list_template *").trigger("initDT",[null,null,null]);if($.inArray("bootstrap-select",InitScriptsLoaded)==-1){$('<link href="../selectpicker/bootstrap-select.min.css" rel="stylesheet" type="text/css">').appendTo("head");$('<script src="../selectpicker/bootstrap-select.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("bootstrap-select")}}}catch(i){SnapSysError("Error in container initDT",i)}try{if(aa.find('[ctrl_type="pivot_table"]').length>0){if($.inArray("pivottables",InitScriptsLoaded)==-1){$('<script src="../pivottable_renderers/plotly/plotly-basic-latest.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_renderers/google-api/loader.js"<\/script>').appendTo("head");$('<script src="../jquery/jquery-2.2.4.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_renderers/jquery-ui/jquery-ui.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_renderers/jquery-cookie/jquery.cookie.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_renderers/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_renderers/d3/d3.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_renderers/c3/c3.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_v2.23.0/dist/pivot.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_v2.23.0/dist/plotly_renderers.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_v2.23.0/dist/export_renderers.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_v2.23.0/dist/c3_renderers.min.js"><\/script>').appendTo("head");$('<script src="../pivottable_v2.23.0/dist/d3_renderers.min.js"><\/script>').appendTo("head");$('<link rel="stylesheet" type="text/css" href="../pivottable_v2.23.0/dist/pivot.min.css" rel="stylesheet" type="text/css">').appendTo("head");$('<script src="pivot_utils.js"><\/script>').appendTo("head");InitScriptsLoaded.push("pivottables")}aa.find("pivot_table").trigger("initPivots",aa)}}catch(i){SnapSysError("Error in container initPivots",i)}try{var t=aa.find('[ctrl_type="chart"]');if(t.length>0){if($.inArray("Chart",InitScriptsLoaded)==-1){$('<script src="../Chart/Chart.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("Chart")}t.trigger("initCHART")}}catch(i){SnapSysError("Error in container initCHART",i)}try{if(aa.find('[ctrl_type="selectmenu"]').length>0){if($.inArray("bootstrap-select",InitScriptsLoaded)==-1){$('<link href="../selectpicker/bootstrap-select.min.css" rel="stylesheet" type="text/css">').appendTo("head");$('<script src="../selectpicker/bootstrap-select.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("bootstrap-select")}}aa.find('input,textarea,[ctrl_type="selectmenu"]').trigger("initREQUIRED").trigger("initshiwa")}catch(i){SnapSysError("Error in container initREQUIRED",i)}try{if(aa.find('[ctrl_type="datetime-input"]').length>0){if($.inArray("bootstrap-datetimepicker-custom",InitScriptsLoaded)==-1){$('<link rel="stylesheet" type="text/css" href="../datetimepicker-bootstrap/css/bootstrap-datetimepicker-custom.min.css" >').appendTo("head");$('<script src="../datetimepicker-bootstrap/js/bootstrap-datetimepicker-custom.min.js"><\/script>').appendTo("head");InitScriptsLoaded.push("bootstrap-datetimepicker-custom")}aa.find('[ctrl_type="datetime-input"]').trigger("initDTP")}}catch(i){SnapSysError("Error in container - datetime-input",i)}aa.find(".bxslider.bxslider-captions img").each(function(){$(this).attr("title",$(this).attr("alt"))});aa.find(".bxslider").each(function(){var aw=$(this).attr("id");var ay={auto:$(this).hasClass("bxslider-auto"),pause:$(this).attr("bxslider-pause"),captions:$(this).hasClass("bxslider-captions"),pager:$(this).hasClass("bxslider-pager"),controls:$(this).hasClass("bxslider-controls"),onSlideAfter:function(){$("#"+aw).trigger("control_change")},maxSlides:$(this).attr("bxslider-maxslides"),slideWidth:$(this).attr("bxslider-maxslides")?$("body").width()/$(this).attr("bxslider-maxslides"):0,moveSlides:1};var ax=$(this).bxSlider(ay);$(this).data("carouselObject",ax);$(this).data("carouselSettings",ay)});aa.find('select[id][data-source!="datatable"]').each(function(){var aw=!!$(this).attr("data-livesearch");$(this).selectpicker({liveSearch:aw,liveSearchNormalize:aw,liveSearchPlaceholder:$(this).find("option[data-placeholder]").text(),noneSelectedText:g_LocalizedStrings.SELECTMENU_PLACEHOLDER,noneResultsText:g_LocalizedStrings.SELECTMENU_NO_RESULTS})});$('select[id][data-tooltip],select[id][data-toggle="tooltip"]').each(function(){var aw=$(this);var ax=aw.closest(".visible-wrapper").find("button");$.each(["data-placement","data-original-title"],function(az,ay){ax.attr(ay,aw.attr(ay))});ax.attr("data-tooltip",true);ax.attr("title",null)});aa.find('[data-tooltip="true"],[data-toggle="tooltip"]').not("._sys_list_template *").tooltip();aa.find("input[data-inputmask]").inputmask();aa.find("input[maxlength]").each(function(){$(this).parent().css("max-width",(Number($(this).attr("maxlength"))+2)+"ex")})},function(c){RunTimeError("container error:",c)},null,null,null,{dataType:"html"},false);return}break;case"main":switch(T){case"title":aa.attr("data-page_title",J);if(GetControlProp(o,"visible")){SetWindowTitle(J)}return}break;case"section":case"advsection":case"controlgroup-radio":switch(T){case"enabled":var x=aa.hasClass("hidden");aa.addClass("hidden").find(cDisablableControlsSelector).filter("[id]").each(function(){SetControlProp($(this).attr("id"),T,J)});aa.removeClass("snap-disabled").toggleClass("ui-state-disabled",!J).toggleClass("hidden",x);return;case"readonly":SetReadonly(aa,!!J);return;case"hollowed":if(u!=="advsection"){break}if(J&&!aa.data("stash")){var V=aa.children().detach();aa.data("stash",V)}else{if(!J&&aa.data("stash")){aa.append(aa.data("stash"));aa.data("stash",null)}}return;case"value":if(J==null){aa.find('input[type="radio"]').each(function(){$(this).prop("checked",false)})}else{aa.find('input[value="'+J+'"]').prop("checked",true)}return}break;case"collapsible-set":switch(T){case"enabled":aa.find(cDisablableControlsSelector).each(function(){SetControlProp($(this).attr("id"),"enabled",J)});aa.toggleClass("ui-state-disabled",!J);return}break;case"fragment":switch(T){case"content":aa.html(J);return}break;case"icon":switch(T){case"icon":aa.text(J);return}break;case"otp-icon":switch(T){case"icon":$.each(aa.attr("class").split(" "),function(c,t){if((t.indexOf("poc-")===0||t.indexOf("otp-snap-")===0)){aa.removeClass(t)}});if(J.indexOf("poc-")===0){aa.addClass(J).addClass("poc-icon")}else{aa.addClass("otp-snap-"+J)}return}break;case"telekom-icon":switch(T){case"icon":$.each(aa.attr("class").split(" "),function(c,t){if(t.indexOf("t-icon-")===0){aa.removeClass(t)}});aa.addClass("t-icon-"+J);return}break;case"fa-icon":switch(T){case"icon":$.each(aa.attr("class").split(" "),function(c,t){if(t.indexOf("fa-")===0){aa.removeClass(t)}});aa.addClass("fa-"+J);return}break;case"input-file":switch(T){case"enabled":aa.tooltip("hide").attr("disabled",!J);return;case"files":aa.val(null).change();return}break;case"input-color":case"input-date":case"input-datetime":case"input-datetime-local":case"input-month":case"input-number":case"input-tel":case"input-time":case"input-search":case"input-url":case"input-week":switch(T){case"enabled":aa.tooltip("hide").attr("disabled",!J);return;case"placeholder":aa.attr("placeholder",J);return;case"readonly":aa.prop("readonly",!!J);return;case"value":aa.trigger("control_valuechanged");if(J instanceof Date){switch(u){case"input-date":aa.val(J.toISOString().substr(0,10));return;case"input-time":aa.val(J.toISOString().substr(11,8));return;case"input-datetime-local":aa.val(J.toISOString().substr(0,19));return;default:aa.val(J.toISOString());return}}else{if(u==="input-color"){aa.val(NormalizeColor(J))}else{aa.val(J)}}return}break;case"datetime-input":var A=aa.parent().data("DateTimePicker");switch(T){case"enabled":aa.tooltip("hide").attr("disabled",!J);return;case"readonly":aa.prop("readonly",!!J);return;case"value":if(J instanceof Date){A.date(J)}else{if(J===null||J==""||J==0){A.clear()}else{var C=aa.attr("data-io-format");if(C=="default"){A.date(moment(J))}else{if(C=="YYMMDD"&&J.length==5){J="0"+J}A.date(moment(J,C))}}}return;case"minDate":A.minDate(J);return;case"maxDate":A.maxDate(J);return;case"enabledDates":A.enabledDates(J);return;case"disabledDates":A.disabledDates(J);return;case"enabledHours":A.enabledHours(J);return;case"disabledHours":A.disabledHours(J);return;case"placeholder":aa.attr("placeholder",J);return}break;case"ctr-calendar":switch(T){case"enabled":aa.fullCalendar("option","editable",J);aa.fullCalendar("option","selectable",J);aa.find("button").each(function(){$(this).prop("disabled",!J)});aa.toggleClass("ui-state-disabled",!J);return;case"value":aa.fullCalendar("removeEventSources");aa.fullCalendar("removeEvents");if(J){aa.fullCalendar("addEventSource",J)}return;case"currentDate":aa.fullCalendar("gotoDate",J);return;case"hiddenDays":case"businessHours":case"weekNumbers":case"validRange":case"navLinks":aa.fullCalendar("option",T,J);return;case"view":aa.fullCalendar("changeView",J);return}break;case"rich-text":switch(T){case"readonly":aa.toggleClass("snap-readonly",!!J);aa.data("ckeditor").setReadOnly(!!J);return;case"value":aa.attr("data-set",true).data("ckeditor").setData(J.toString());return}break;case"image":switch(T){case"image":if(!J){aa.attr("src","")}else{if(parseInt(J)){aa.attr("src","get_image.php?img="+J)}else{aa.attr("src",RelURLFromSNAP(J))}}return}break;case"layout_list":switch(T){case"asr_id":case"asr_index":$("#"+o+" > .list-group-item").removeClass("ll-row-selected");if(J){if(aa.attr("data-row-selection")=="single"){J=[J[0]]}J.forEach(function(c){$(T=="asr_id"?"#"+c:"#"+o+" > .list-group-item[_sys_listindex="+c+"]").addClass("ll-row-selected")})}aa.trigger(AddPrefix(cAfterRecordSelectedPrefix,o));return;case"fsr_id":SetControlProp(o,"asr_id",[J]);return;case"fsr_index":SetControlProp(o,"asr_index",[J]);return;case"avr_index":case"avr_id":RunTimeError(u+"."+T+" is a read-only property of #"+o+" in #"+aa.parent().attr("id"));return;case"page":J=Number(J)||1;LayoutListSetPage(o,J);UpdateLayoutListRenderLimit(aa);return;case"readonly":SetReadonly(aa,!!J);return;case"value":if(!J){return}if(!$.isArray(J)){RunTimeError(u+" value must be a list for #"+o);return}ClearLayoutListElements(aa);if(aa.attr("data-lazy")){aa.data("completeValue",JSON.parse(JSON.stringify(J)));aa.data("renderLimit",0);InitLayoutListExtras(aa);UpdateLayoutListRenderLimit(aa)}else{AddLayoutListElements(aa,J.length);SetLayoutListElements(aa,J);InitLayoutListExtras(aa)}return}break;case"layout_record":switch(T){case"listindex":RunTimeError(u+"."+T+" is a read-only property of #"+o+" in #"+aa.parent().attr("id"));return;case"readonly":SetReadonly(aa,!!J);return;case"value":if(J==null){return}if(typeof J!=="object"){RunTimeError(u+" value must be a record for #"+o);return}var M=aa.find("[ctrl_type]");while(M.length){var n=M[0];var P=n.getAttribute("ctrl_type");ap=n.getAttribute("layout_record_field_name")||n.getAttribute("id");if(ap in J){SetControlProp(n.id,ReplaceValueProp(P,T),J[ap])}if(P=="layout_list"||P=="layout_record"){M=M.not("#"+n.id+" *[ctrl_type]")}M=M.not(n)}return}break;case"panel":switch(T){case"enabled":aa.find(cDisablableControlsSelector).each(function(){SetControlProp($(this).attr("id"),"enabled",J)});aa.toggleClass("ui-state-disabled",!J);return;case"header":aa.children(".panel-heading").remove();if(!J){return}var ao=$('<div class="panel-heading">');$('<h3 class="panel-title"></h3>').text(J).appendTo(ao);ao.prependTo(aa);return;case"footer":aa.children(".panel-footer").remove();if(!J){return}$('<div class="panel-footer"></div>').text(J).appendTo(aa);return}break;case"range-input":switch(T){case"enabled":aa.tooltip("hide").prop("disabled",!J).trigger("updateRanges");return;case"max":case"min":case"step":aa.attr(T,J).trigger("updateRanges");return;case"value":aa.val(J);aa.trigger("updateRanges");return}break;case"dual-range-input":switch(T){case"min":aa.data("ionRangeSlider").update({min:J});return;case"max":aa.data("ionRangeSlider").update({max:J});return;case"step":aa.data("ionRangeSlider").update({step:J});return;case"enabled":aa.data("ionRangeSlider").update({block:!J});return;case"value":aa.attr("data-set",true).data("ionRangeSlider").update({from:J.low,to:J.high});return}break;case"selectmenu":switch(T){case"display":var ab=[];if(!aa.attr("multiple")){aa.children("option").each(function(){if($(this).text()==J){ab=$(this).attr("value");return false}return true})}else{if(!Array.isArray(J)){J=[J]}aa.children("option").each(function(){if(J.indexOf($(this).text())>=0){ab.push($(this).attr("value"))}})}aa.val(ab);aa.data("selectpicker")&&aa.data("selectpicker").val(ab);return;case"readonly":SetControlProp(o,"enabled",!J);return;case"enabled":$('.dropdown-toggle[data-id="'+o+'"]').attr("disabled",!J);aa.attr("disabled",!J);aa.selectpicker&&aa.selectpicker("refresh");aa.tooltip("hide").attr("disabled",!J);return;case"options":aa.empty();$.each(J||[],function(aw,c){var t=$("<option>");if(c.value!==undefined){t.attr("value",c.value)}if(c.selected){t.attr("selected","")}if(c.enabled!==undefined&&!c.enabled){t.attr("disabled","")}if(c.visible!==undefined&&!c.visible){t.addClass("hidden")}if(c.placeholder){t.attr("data-placeholder",true)}if(c.subtext){t.attr("data-subtext",c.subtext)}if(c.display){t.text(c.display)}aa.append(t)});if(aa.attr("data-livesearch")=="true"&&J.length==0){aa.append($('<option data-placeholder="true">'))}aa.selectpicker("refresh");return;case"placeholder":if(!J){aa.children('option[data-placeholder="true"]').remove()}else{aa.children('option[data-placeholder="true"]').text(J)}aa.trigger("updateSelects");aa.selectpicker("refresh");return;case"search":aa.filter("[data-livesearch]").closest(".bootstrap-select").find(".bs-searchbox>input:visible").val(J);return;case"value":aa.val(J);aa.data("selectpicker")&&aa.data("selectpicker").val(J);return}break;case"datatable":switch(T){case"column_search":if(J===null){J={}}var f=aa.children("thead").children("tr").eq(0);var d=aa.children("thead").children("tr").eq(1);if(d.length==0){return}f.children("th[id]").each(function(c,aw){var ay=aw.id;if(J[ay]===undefined||J[ay]===null){return}var ax=J[ay];var i=d.children("td").eq(c).find("input,select");if(i.length===0){return}i.val(ax);if(i.val()!==ax){ax="";i.val(ax)}var t=aa.DataTable().column(c);if(ax===" "){t.search("^$",true,false).draw()}else{t.search(ax)}});aa.DataTable().draw(true);return;case"enabled":aa.parents("div.dataTables_wrapper").first().toggleClass("disabled",!J);$('input[aria-controls="'+o+'"],select[aria-controls="'+o+'"]').attr("disabled",!J);aa.attr("disabled",!J);return;case"selected_rows":RunTimeError(u+"."+T+" is a read-only property of #"+o);return;case"order":var k=aa.DataTable();k.order(J);if(aa.find(".group-start").length||aa.find(".group-end").length){k.rowGroup().dataSrc(aa.find("th").eq(J[0][0]).attr("id"))}InitCardTableControls(aa);k.draw();return;case"page":aa.DataTable().page(J-1).draw(false);if(aa.find(".dataTables_paginate").length==0){window.setTimeout(function(){aa.DataTable().page(J-1).draw(false)},1)}return;case"table_search":if(J===null){J=""}aa.DataTable().search(J).draw();return;case"value":if(J!==null&&!$.isArray(J)){RunTimeError("datatable.value must be an array or null.");return}if(J===null){J=[]}aa.DataTable().clear().rows.add(J);aa.DataTable().columns().search("");aa.children("thead").find(".input-filter,.select-filter").val("");aa.removeClass("snap-recalc-ok");RecalcControls(aa,false);return}break;case"datatable_header":switch(T){case"value":case"caption":J=J||"";var Y=(am?$(am):aa.parents("table").first()).DataTable();var m=Y.settings()[0].aoColumns[Y.column("#"+o).index()];if(!m){return}m.sTitle=J;$(Y.column(Y.column("#"+o).index()).header()).text(J);Y.column("#"+o).nodes().to$().find("label").text(J);InitCardTableControls(aa.closest("table"));Y.draw(false);return}break;case"text":switch(T){case"caption":case"text":aa.text(J);return;case"clickable":aa.toggleClass("snap_clickable_text",J);return}break;case"dataholder":case"input-email":case"input-hidden":case"input-password":case"input-text":case"textarea-input":switch(T){case"enabled":aa.tooltip("hide").prop("disabled",!J);return;case"placeholder":aa.attr("placeholder",J);return;case"readonly":aa.prop("readonly",!!J);return;case"value":SetTextFieldValue2(aa,J);return}break;case"number-input":switch(T){case"enabled":aa.tooltip("hide").prop("disabled",!J);return;case"placeholder":aa.attr("placeholder",J);return;case"readonly":aa.prop("readonly",!!J);return;case"value":var ag=aa.attr("data-thousand-sep");var e=aa.attr("data-decimal-sep");var F=aa.attr("data-decimals");if(ag=="none"){ag=""}if(ag=="space"){ag=" "}var a=NumberSeparator("decimal");var ak=NumberSeparator("group");J=J.replaceAll(ag,"");J=J.replaceAll(e,a);SetTextFieldValue2(aa,J);return;case"min":aa.attr("data-min",J);aa.trigger("blur");return;case"max":aa.attr("data-max",J);aa.trigger("blur");return;case"decimals":aa.attr("data-decimals",J);aa.trigger("blur");return}break;case"progress":var I;if(aa.hasClass("progress")){var U=aa.children(".progress-bar");U.attr(T=="value"?"aria-valuenow":"aria-valuemax",J);I=Math.floor(100*U.attr("aria-valuenow")/U.attr("aria-valuemax"));U.attr("style","width: "+I+"%;");if(U.attr("show-value")!=="hide"){U.text(parseInt(J))}}else{aa.prop(T,J);I=Math.floor(100*aa.prop("value")/aa.prop("max"))}aa.trigger("updateProgress",I);return;case"listview":switch(T){case"list_items":ArrayToListView(J,o);return}break;case"listitem":switch(T){case"aside":aa.closest("li").find("span").remove();$('<span class="badge">').text(J).prependTo(aa.is("li")?aa:aa.parent());return;case"caption":aa.children("p").remove();$('<p class="list-group-item-text">').text(J).appendTo(aa);return;case"header":aa.children("h4").remove();var z=$('<h4 class="list-group-item-heading">').text(J);if(aa.children("span").length>0){z.insertAfter(aa.children("span"))}else{z.prependTo(aa)}return}break;case"tabitem":switch(T){case"active":if(J){aa.siblings().removeClass("active");aa.addClass("active");var K="ui-id-"+aa.attr("id");aa.parent().next().children(".tab-pane").each(function(t,aw){var c=$(aw);c.toggleClass("active in",c.attr("id")==K)});RecalcControls(aa.parent().next().children(".tab-pane#"+K))}else{if(aa.hasClass("active")){SetControlProp(aa.siblings(":not([id~="+o+"]):not(.hidden)").first().attr("id"),"active",true)}}return;case"caption":if(aa.find("._sys_tabitem_caption")){aa.find("._sys_tabitem_caption").text(J)}else{aa.children("a").text(J)}return;case"enabled":aa.toggleClass("disabled",!J);return}break;case"timeline":switch(T){case"selection":aa.data("timelineObject").setSelection(J);return;case"center":if(J.constructor==Date){aa.data("timelineObject").moveTo(J)}else{aa.data("timelineObject").focus(J)}return;case"range":aa.data("timelineObject").setWindow(J);return;case"items":aa.data("timelineItems",J);aa.data("timelineObject").setItems(J);return;case"groups":aa.data("timelineGroups",J);aa.data("timelineObject").setGroups(J);return;case"options":aa.data("timelineOptions",J);aa.data("timelineObject").setOptions(J);return}break;case"google_map":case"google_map_streetview":var H=aa[0].gMap;switch(T){case"mapType":var h=["roadmap","terrain","satellite","hybrid","streetview"];if(H&&h.includes(H.mapTypeId)&&h.includes(J)){if(H.mapTypeId==="streetview"&&J!=="streetview"&&u!=="google_map_streetview"){H.getStreetView().setVisible(false);H.setMapTypeId(J)}else{if(H.mapTypeId!=="streetview"&&J==="streetview"){H.setMapTypeId(J);H.getStreetView().setVisible(true);H.getStreetView().setPosition({lat:H.markers[0].getPosition().lat(),lng:H.markers[0].getPosition().lng()})}else{if(H.mapTypeId!=="streetview"&&J!=="streetview"){H.setMapTypeId(J)}}}}else{aa.data("type",J)}return;case"locations":if(J&&H){if(H.markers){for(al=0;al<H.markers.length;al++){H.markers[al].setMap(null)}}if(J instanceof Array){if(H.mapTypeId==="streetview"){J=getFirstValidLocationForStreetview(J)}else{J=removeEmptyLocationItems(J)}}if(typeof J==="object"&&!J.length){J=[convertObjectLocationParameters(J)]}if(typeof J==="string"){J=[convertStringLocation(J)]}H.markers=[];H.markerParameters=[];var B=aa.attr("data-animation");var O=new google.maps.LatLngBounds();if(J){for(var au=0;au<J.length;au++){if(J[au]){var ai=J[au];var ae={address:ai.address,infowindow:ai.infowindow,latitude:ai.latitude,longitude:ai.longitude,markertype:ai.markertype,heading:ai.heading,pitch:ai.pitch,order:au};H.markerParameters.push(ae);if(ai.latitude!=null&&ai.longitude!=null){var v={latitude:ai.latitude,longitude:ai.longitude};if(ai.infowindow){v.infowindow=ai.infowindow}if(ai.address){v.address=ai.address}SetMarkers(v,H,B,o,ai,O,au)}else{if(ai.address){getAddress(ai.address,H,B,o,ai,O,au)}else{RunTimeError("No address or incorrect coordinates had been set.")}}}}}aa.attr("data-address",JSON.stringify(J));return}else{RunTimeError("Incorrect values had been set.");aa.data("location",J);return}case"height":aa[0].style.height=J+"px";aa.data("height",J);return;case"zoom":if(H){var E=getLastMarker(H.markers);H.setZoom(J);if(E){H.setCenter(E.getPosition())}}aa.data("zoom",J);return}break}RunTimeError("SetControlProp: "+u+"."+T+" is not handled for #"+o)}function SetReadonly(c,b){var a=c.hasClass("hidden");c.addClass("hidden").find(cReadOnlyControlsSelector).filter("[id]").each(function(){SetControlProp(this.id,"readonly",b)});c.toggleClass("snap-readonly",b).toggleClass("hidden",a)}function GetControlAttr(b,a){if(!b){return undefined}if(b=="?"){return undefined}if(!a){return undefined}return $("#"+b).attr(a)}function SetControlAttr(c,a,b){if(!c){return}if(c=="?"){return}if(!a){return}$("#"+c).attr(a,b)}function HasPrefix(b,a){return a.substr(0,b.length)==b}function AddPrefix(b,a){return b+a}function DelPrefix(b,a){if((a!==undefined)&&(HasPrefix(b,a))){return a.substr(b.length)}else{return a}}function GetUrlParam(a){if(g_TopFrame&&g_TopFrame.g_UrlParams){return g_TopFrame.g_UrlParams[a]||null}return null}function GetFrameUrlParam(a){return document.pageParams[a]}function SubstituteIntoText(b,a){Object.keys(b).forEach(function(c){a=a.split("{"+c+"}").join(b[c])});return a}function Blockly_textToTitleCase(a){return a.replace(/[^\s-]+/g,function(b){return b[0].toUpperCase()+b.substring(1).toLowerCase()})}function randomGUID(){var b="........-....-4...-8...-............";var a="";for(var c in b){if(b[c]=="."){a+=(Math.floor(16*Math.random())).toString(16)}else{a+=b[c]}}return a}var AJAXCounter=0;function ShowSpinner(){if((typeof AJAXCounter!=="number")||(++AJAXCounter>0)){$("#ajax_loader").show();if(window.frameElement.name=="M"){SetSessionValue("_sys_suba_middle_frame_is_busy","true")}}}function HideSpinner(){if((typeof AJAXCounter!=="number")||(--AJAXCounter<=0)){AJAXCounter=0;$("#ajax_loader").hide();if(window.frameElement.name=="M"){SetSessionValue("_sys_suba_middle_frame_is_busy","false")}}}function DoAjaxCall2(e,b,k,l,h,d,g,f,a,i){var c={cache:false,dataType:"json",data:b,type:k,timeout:(g||20)*1000,beforeSend:function(m){if(i){ShowSpinner()}$.each(d||{},function(o,n){m.setRequestHeader(o,n)})},complete:(i?HideSpinner:null),success:l,error:function(m,o,n){AjaxError("DoAjaxCall2",m,o,n);if(o==="timeout"){if(typeof f=="function"){f()}}else{h(m)}}};$.extend(c,a||{});SecureAJAX(e,c)}function DoAjaxFileUpload(b,c,a,d){var e=new FormData();e.append("file",$("#"+d).prop("files")[0]);e.append("params",c);SecureAJAX(b,{dataType:"json",data:e,async:true,cache:false,contentType:false,processData:false,beforeSend:ShowSpinner,complete:HideSpinner,success:a})}function DoAjaxFileUpload2(c,d,e,a,b){var f=new FormData();f.append("file",$("#"+e).prop("files")[0]);f.append("params",JSON.stringify(d));SecureAJAX(c,{dataType:"json",data:f,async:true,cache:false,contentType:false,processData:false,beforeSend:ShowSpinner,complete:HideSpinner,success:a,error:b})}function DoOtherUserInfo(a,d,b,c){SecureAJAX("get_user_info.php",{dataType:"json",data:{user:a,pass:d},timeout:20000,beforeSend:ShowSpinner,complete:HideSpinner,success:function(e){if("msg" in e){c(e.msg)}else{if("ok" in e){b(e.ok)}}},error:function(e){c(e.statusText)}})}function GetHostCallValue(i,d){var n,k,m;if(d){n={}}var e=Control_type(i);var h="";if(i.indexOf(".")>-1){h="#"+i.substring(0,i.indexOf("."));i=i.split(".").pop();k=$(h+" th#"+i)}else{k=$("#"+i);if(k.length>0){k=k[0]}}if(((k.length==0)&&(e!=="selectmenu"))&&h==""){RunTimeError("GetHostCallValue: #"+i+" does not exist.");return""}switch(e){case"checkbox":case"checkbox-custom":case"flipswitch":case"flipswitch-custom":m=k.checked;if(e=="checkbox-custom"||e=="flipswitch-custom"){m=$(k).attr(m?"data-on-value":"data-off-value")}if(d){n[k.name]=m}else{n=m}return n;case"radiobutton":if(d){n[i]=!!$(k).prop("checked");if(k.checked){n[k.name]=k.value}}else{n=!!$(k).prop("checked")}return n;case"input-color":case"input-number":case"range-input":case"input-tel":case"input-url":case"input-email":case"input-hidden":case"input-datetime":case"input-datetime-local":case"input-date":case"input-time":if(d){n[k.name]=GetTextFieldValue(i)}else{n=GetTextFieldValue(i)}return n;case"datetime-input":if($("#"+i).attr("data-io-format")=="default"){if($("#"+i).parent().data("DateTimePicker").date()!=null){m=$("#"+i).parent().data("DateTimePicker").date().toDate().toISOString().split(".")[0]+"Z"}else{m=""}}else{var l=$("#"+i).attr("data-io-format");m=$("#"+i).parent().data("DateTimePicker").date()!=null?$("#"+i).parent().data("DateTimePicker").date().format(l):""}if(d){n[k.name]=m}else{n=m}return n;case"dual-range-input":var c=$("#"+i).prop("value").split(";");m={low:c[0],high:c[1]};m=JSON.stringify(m);if(d){n[k.name]=m}else{n=m}return n;case"ctr-calendar":m=ProcessCalEvents($("#"+i).fullCalendar("clientEvents"),true);if(d){n[i]=m}else{n=m}return n;case"rich-text":m=$("#"+i).data("ckeditor").getData();if(d){n[i]=m}else{n=m}return n;case"input-password":case"input-text":case"textarea-input":case"selectmenu":if(d){n[k.name]=GetTextFieldValue(i)||""}else{n=GetTextFieldValue(i)||""}return n;case"input-file":if(d){n[k.name]=k.files[0]}else{n=k.files[0]}return n;case"layout_list":case"layout_record":case"value":n=(e=="layout_list")?[]:{};var b=(e=="layout_list")?$("#"+i).children():$("#"+i+" *[ctrl_type]");b=b.not("table").not("th").not('[ctrl_type="text"]');while(b.length){var a=b[0];var f=a.getAttribute("ctrl_type");if(!a.classList.contains("_sys_list_template")){var g=ReplaceValueProp(f,"value");if(ControlTypeHasProp(f,g)){if(e=="layout_list"){n.push(GetHostCallValue(a.id,false))}else{n[a.getAttribute("layout_record_field_name")||a.getAttribute("id")]=GetHostCallValue(a.id,false)}}if(f=="layout_list"||f=="layout_record"){b=b.not("#"+a.id+" *[ctrl_type]")}}b=b.not(a)}return n;case"controlgroup-radio":k=$("#"+i);m=null;k.find('input[type="radio"]').each(function(){if($(this).prop("checked")){m=this.value;return false}return true});if(d){n[i]=m}else{n=m}return n;default:m=GetControlProp(i,ReplaceValueProp(e,"value"));if(d){n[i]=m}else{n=m}return n}}function HostCall(g,d,b,c,e,a,f){HostCall2(d,b,c,e,a,f)}function HostCall2(k,r,i,g,t,h,n){var m=new FormData();var o={};var l={};var v;if((typeof $HostCallData!=="undefined")&&(k in $HostCallData)&&("id" in $HostCallData[k])){$.each($HostCallData[k]["id"],function(a,x){if(($('div[id="'+x+'"][ctrl_type="ctr-calendar"]').is("div")||($('div[id="'+x+'"][ctrl_type="layout_list"]').is("div")))){m.append(x,JSON.stringify(GetHostCallValue(x,false)))}else{if($("#"+x).is('[ctrl_type="rich-text"]')){m.append(x,GetHostCallValue(x,false))}else{if(Control_type(x)==="layout_record"){v=GetHostCallValue(x,true);m.append(x,JSON.stringify(v))}else{v=GetHostCallValue(x,true);$.each(v,function(y,z){m.append(y,z)})}}}})}else{var b=$("#thePage");var e=b.find(":input:disabled").removeAttr("disabled");var p=b.find(':input[name]:not([layout_record_field_name],[ctrl_type="dataholder"])');var w=b.find('div[id][ctrl_type="layout_list"]:not([layout_record_field_name])');var u=b.find('div[id][ctrl_type="ctr-calendar"]:not([layout_record_field_name])');var s=b.find('div[id][ctrl_type="rich-text"]:not([layout_record_field_name])');e.attr("disabled","disabled");p.each(function(){if(!this.id){return}v=GetHostCallValue(this.id,true);$.each(v,function(a,x){m.append(a,x)})});w.each(function(){m.append(this.id,JSON.stringify(GetHostCallValue(this.id,false)))});u.each(function(){m.append(this.id,JSON.stringify(GetHostCallValue(this.id,false)))});s.each(function(){m.append(this.id,GetHostCallValue(this.id,false))})}if((typeof $HostCallData!=="undefined")&&(k in $HostCallData)&&("variable" in $HostCallData[k])){$.each($HostCallData[k]["variable"],function(x,a){o[a]=window[a]})}if((typeof $HostCallData!=="undefined")&&(k in $HostCallData)&&("clientsession" in $HostCallData[k])){$.each($HostCallData[k]["clientsession"],function(a,x){l[x]=GetSessionValue(x)})}m.append("_sys_language",GetLanguage());m.append("_sys_Variables",JSON.stringify(o));m.append("_sys_ClientSessionValues",JSON.stringify(l));m.append("_sys_MapperID",k);m.append("_sys_TabID",g_TopFrame.g_tabId);if(GetUrlParam("mockws")||window.top.g_useMockWS){m.append("_sys_MockWS",true);var q="",d="0";if(g_TopFrame&&g_TopFrame.GetTestCaseTitle){q=g_TopFrame.GetTestCaseTitle()}if(GetUrlParam("page_id")){d=GetUrlParam("page_id")}var c=window.top.location.search.match(/[?&]ItemID=([0-9]+)(&|$)/);if(c!==null&&c.length>=2){d=c[1]}m.append("_sys_TestSuiteID",d);m.append("_sys_TestCaseName",q)}var f;DoConsoleLog("HostCall2: "+k);SecureAJAX("./mapper/process.php",{cache:false,dataType:"json",data:m,contentType:false,processData:false,timeout:t*1000,async:h,beforeSend:(n?ShowSpinner:null),complete:(n?HideSpinner:null),success:function(z){var y=z;var x=[];var a=[];if(z.Language!==undefined){SetLanguage(z.Language)}if(z.CtrlValue!==undefined){y=z.CtrlValue}if(z.SessionVariable!==undefined){x=z.SessionVariable}if(z.ClientVariable!==undefined){a=z.ClientVariable}if((z.ConsoleLog!==undefined)&&(z.ConsoleLog.length>0)){DoConsoleLog(z.ConsoleLog)}$.each(x,function(B,A){SetSessionValue(B,A)});$.each(a,function(B,A){window[B]=A});$.each(y,function(L,E){f=L.replace("[]","\\[\\]");f=L.replace(/\./g,"\\.");if($('input[name="'+f+'"]').is(":radio")){$('input:radio[name="'+f+'"]').prop("checked",false);$('input:radio[name="'+f+'"][value="'+E.VALUE+'"]').prop("checked",true)}else{if($("input#"+f).is(":radio")){var H=$("input#"+f).attr("name");$('input:radio[name="'+H+'"]').prop("checked",false);$("#"+f).prop("checked",E.VALUE)}else{if($('input[name="'+f+'"]').is(":checkbox")){if($("#"+f).attr("ctrl_type")=="checkbox-custom"||$("#"+f).attr("ctrl_type")=="flipswitch-custom"){if($("#"+f).attr("data-on-value")==E.VALUE){$("#"+f).prop("checked",true)}else{$("#"+f).prop("checked",false)}}else{$("#"+f).prop("checked",AsBoolean(E.VALUE))}}else{if($('select[name="'+f+'"]').is("select")){var N=$("#"+f);if(E.CONTENT!==undefined){N.empty();$.each(E.CONTENT,function(){N.append($("<option />").val(this.VALUE).text(this.DISPLAY))});N.val("");N.selectpicker("refresh")}if(E.VALUE!==undefined){if($.isArray(E.VALUE)){var B=E.VALUE.toString().split(",");N.val(B);N.data("selectpicker")&&N.data("selectpicker").val(B)}else{N.val(E.VALUE);N.data("selectpicker")&&N.data("selectpicker").val(E.VALUE)}}}else{if($('ul[id="'+f+'"]').is("ul")){var J=$("#"+f);var G=0;if(E.CONTENT!==undefined){J.empty();$.each(E.CONTENT,function(){var O=$("<li/>").addClass("list-group-item").appendTo(J);$("<p/>").text(this.ASIDE).addClass("badge").appendTo(O);var P=$('<a href="#"/>').attr("id",f+"-listitem-"+G).attr("ctrl_type","jqm_listitem").appendTo(O);$("<h4/>").text(this.HEADER).addClass("list-group-item-heading").appendTo(P);$("<p/>").text(this.LISTITEM).addClass("list-group-item-text").appendTo(P);G++});$("#"+f+" > li:last").addClass("ui-last-child");$("#"+f+" > li:first").addClass("ui-first-child")}}else{if($('[ctrl_type="datetime-input"][name="'+f+'"]').is(":input")||$('div[id="'+f+'"][ctrl_type="ctr-calendar"]').is("div")||$("#"+f).is('[ctrl_type="rich-text"]')||$("#"+f).is('[ctrl_type="dual-range-input"]')||$('div[id="'+f+'"][ctrl_type="layout_list"]').is("div")||$('div[ctrl_type="fragment"][id="'+f+'"]').is("div")){SetControlProp(f,"value",E.VALUE)}else{if($('[ctrl_type="number-input"][name="'+f+'"]').is(":input")){var I=$('[ctrl_type="number-input"][name="'+f+'"]');var A=I.attr("data-thousand-sep");var M=I.attr("data-decimal-sep");var D=I.attr("data-decimals");if(A=="none"){A=""}if(A=="space"){A=" "}var K=NumberSeparator("decimal");var C=NumberSeparator("group");E.VALUE=E.VALUE.replaceAll(A,"");E.VALUE=E.VALUE.replaceAll(M,K);SetTextFieldValue(f,E.VALUE)}else{if($('input[name="'+f+'"]').is(":input")||$('textarea[name="'+f+'"]').is("textarea")){SetTextFieldValue(f,E.VALUE)}else{if($('table[id="'+f+'"]').is("table")){try{if((E.VALUE[0]!=null)&&(E.VALUE[0].constructor===Array)){SetControlProp(f,"value",E.VALUE[0])}else{SetControlProp(f,"value",E.VALUE)}}catch(F){SnapSysError("HostCall table set value error:",F)}}else{if(E.hasOwnProperty("VALUE")){$("#"+f).text(E.VALUE)}}}}}}}}}}});r()},error:function(a,y,x){AjaxError("HostCall2",a,y,x);if(a.status===409){OnInvalidSession()}if(y==="timeout"){g()}else{if(g_TopFrame.g_AlertOnError){MessageDlg("",(a.responseJSON?a.responseJSON.ErrorMessage:"")||"",a.responseJSON?(a.responseJSON.Message||JSON.stringify(a.responseJSON)):a.responseText,"O",{},{},null,"danger")}DoConsoleLog(a.responseJSON);i(a)}}})}function ExecuteServerProcess(d,b,c,a){SecureAJAX("./mapper/save_params.php",{contentType:'application/x-www-form-urlencoded; charset="UTF-8"',data:b,dataType:"json",success:function(e){if(a){window.open(a+"/"+d+"/"+e+(c?"/"+c:""))}else{window.open("mapper/execute_process.php?ID="+d+"&secret="+e)}},error:function(e,g,f){AjaxError("ExecuteServerProcess",e,g,f)}})}function FilterValue(b,a){return FilterValueInner(JSON.parse(JSON.stringify(b)),a.toLowerCase())}function FilterValueInner(h,d){var k,b;if(h===null||h===undefined){return h}if($.isArray(h)){b=[];var g=0,a=h.length;for(;g<a;g++){k=FilterValueInner(h[g],d);if(k!==undefined){b.push(k)}}return b}if($.isPlainObject(h)){b={};var e,c=0;for(e in h){k=FilterValueInner(h[e],d);if($.isArray(k)){b[e]=k;c+=k.length}else{b[e]=h[e];if(k!==undefined){c++}}}return(c>0)?b:undefined}return(h.toString().toLowerCase().indexOf(d)>=0)?h:undefined}function IndexOfValueType(a){switch(typeof a){case"object":return 1;case"boolean":return 2;case"number":case"bigint":return 3;case"string":return 4;default:return 0}}function TablesSort(f,e,d){if(!e){return e}var c=JSON.parse(JSON.stringify(e));var a=d?-1:1;var g=GetLanguage();var b=[[0,-1,-1,-1,-1],[1,0,-1,-1,-1],[1,1,function(i,h){return Number(i)-Number(h)},-1,-1],[1,1,1,function(i,h){return i-h},-1],[1,1,1,1,function(i,h){return i.localeCompare(h,g)}]];c.sort(function(i,h){if(!(f in i)||!(f in h)){return 0}var k=b[IndexOfValueType(i[f])][IndexOfValueType(h[f])];if(typeof k=="function"){k=k(i[f],h[f])}return a*k});return c}function TablesFilter(b,a){if(!b){return b}if(typeof b.__proto__==="unknown"||typeof b.__proto__==="undefined"){b=JSON.parse(JSON.stringify(b))}return b.filter(function(c){return a(c)})}function TablesFindIndex(b,a){if(!b){return 0}if(typeof b.__proto__==="unknown"||typeof b.__proto__==="undefined"){b=JSON.parse(JSON.stringify(b))}return b.findIndex(function(c){return a(c)})+1}function TablesReorder(b,c){if(!b){return b}var a=[];$.each(b,function(d,e){a.push(c(e))});return a}function TablesJoin(i,g,d,a,e){if(!i||i.length==0){return[]}if(!g||g.length==0||!d||!a){return e?i:[]}var b={};g.forEach(function(r){if(a in r){var q=r[a];if(q){if(!b[q]){b[q]=[]}b[q].push(r)}}});var l={};var c;for(c in i[0]){l[c]=null}for(c in g[0]){l[c]=null}var p=[];for(var h in i){var o=i[h];var k=o[d];var n=k?b[k]:null;if(n){for(var f in n){var m=n[f];p.push($.extend({},l,m,o))}}else{if(e){p.push($.extend({},l,o))}}}return p}function TablesAppend(e,c,b){if(!c||c.length===0){return b}if(!b||b.length===0){return c}var a=[];var f={};var d;if(e=="A"){for(d in c[0]){f[d]=null}$.each(c,function(){a.push($.extend({},this))});$.each(b,function(){var h=this;var g={};for(d in f){g[d]=h[d]||null}a.push(g)});return a}else{if(e=="M"){for(d in c[0]){f[d]=null}for(d in b[0]){f[d]=null}$.each(c,function(){a.push($.extend({},f,this))});$.each(b,function(){a.push($.extend({},f,this))});return a}else{if(e=="C"){return c.concat(b)}else{SnapSysError("Unimplemented operation: "+e)}}}}function InitDateTimePicker(f){var c=$(f);var g=c.find("input");try{var b=c.closest("._sys_list_template");if(b[0]){return}var a={locale:GetLanguage(),format:g.attr("data-format"),showTodayButton:g.attr("data-today-button")=="true",showClear:g.attr("data-clear-button")=="true",showClose:g.attr("data-close-button")=="true"&&g.attr("data-inline")=="false",focusOnShow:false,useCurrent:false,daysOfWeekDisabled:g.attr("data-disable-weekends")=="true"?[0,6]:[],inline:g.attr("data-inline")=="true"};if(g_LocalizedStrings.DATETIMEPICKER_TOOLTIPS){a.tooltips=g_LocalizedStrings.DATETIMEPICKER_TOOLTIPS}c.datetimepicker(a).on("dp.change",function(){g.trigger("control_change")})}catch(d){SnapSysError("DateTimePicker Init Error",d)}}var layoutListRefs=[];function InitLayoutListExtras(a){if($(a).parent("._sys_list_template")[0]){return}var b=$(a).attr("id");$("#"+b+" > .list-controls-top").show();if($(a).hasClass("list-group-table-rowselection")){$("#"+b+" .list-group-item:not(._sys_list_template)").on("mousedown",function(d){if((!$(d.target)[0].hasAttribute("ctrl_type")&&$(d.target).hasClass("form-group"))||$(d.target).is("[readonly]")||$(d.target).attr("ctrl_type")=="text"||$(d.target).is("._sys_expandable_toggle>i")||d.currentTarget==d.target){var c=$(d.currentTarget);if(c.hasClass("ll-row-selected")){c.removeClass("ll-row-selected")}else{if($(a).attr("data-row-selection")=="single"){$("#"+b+" > .list-group-item").removeClass("ll-row-selected")}c.addClass("ll-row-selected")}c.trigger(AddPrefix(cAfterRecordSelectedPrefix,b))}})}if($(a).attr("data-initialized")!="true"){if($(a).attr("data-size")=="table"){if($(a).attr("data-ordering")=="true"){LayoutListFillOrderSelector(b);LayoutListCreateTableHeader(b,true)}else{LayoutListCreateTableHeader(b,false)}}else{if($(a).attr("data-ordering")=="true"){LayoutListFillOrderSelector(b)}}$(a).attr("data-initialized","true")}if($(a).attr("data-filtering")=="true"){$("#"+b+" .list-controls-top input.form-control").off("input").bindWithDelay("input",function(){LayoutListFilter(b,$(this).val())},70).attr("title",g_LocalizedStrings.LAYOUT_SEARCH);if($(a).attr("data-filtered")){LayoutListFilter(b,$(a).attr("data-filtered"))}}if(($(a).attr("data-filtering")=="true"||$(a).attr("data-ordering")=="true")||$(a).attr("data-size")=="table"){$("#"+b+" > .list-controls-top").removeClass("hidden")}if($(a).attr("data-paginating")=="true"){LayoutListCreatePagination(b)}else{if($(a).hasClass("list-group-table-striped")){LayoutListApplyStripes(b)}}a.trigger("rendered")}function LayoutListFillOrderSelector(a){$("#"+a+"-order").on("change",function(){LayoutListOrder($(this).closest("[ctrl_type=layout_list]").attr("id"),this)}).empty().append('<option value="0" selected>\u25b2\u25bc</option>');$("#"+a+" ._sys_list_template [id]").each(function(){var b=$(this);if(b.closest("[ctrl_type=layout_list]").attr("id")!==a){return}var d=b.attr("layout_record_field_name")||b.attr("id");var c=$("#"+a+" ._sys_list_template").find('label[for="'+b.first().attr("id")+'"]');if(c[0]){$("#"+a+"-order").append('<option value="0'+d+'">'+$(c[0]).html()+" \u25b2</option>");$("#"+a+"-order").append('<option value="1'+d+'">'+$(c[0]).html()+" \u25bc</option>")}});if($("#"+a+"-order").children().length<3){RunTimeError("Ordering is enabled for layout list #"+a+", but no child control has a label.")}if($("#"+a+"-order").selectpicker){$("#"+a+"-order").selectpicker("refresh")}}function LayoutListCreateTableHeader(d,b){var a=$("#"+d+" ._sys_list_template .row");var c=$("#"+d+" .snap-ll-header");if(!a[0]){return}if($("#"+d+" ._sys_expandable")[0]){c.addClass("snap-ll-expandable");a=$("#"+d+" ._sys_list_template ._sys_expandable_header .row")}a.each(function(f,i){var h=$(i);var e=$("<div></div>");e.addClass(h.attr("class"));$.each(h.children(".form-group"),function(m,n){var l=$("<div></div>");l.addClass($(n).attr("class"));var k=$(n).find("label")[0];if(k){if(b){var g=$('<a class="ll-order-anchor">'+$(k).html()+"</a>");g.attr("data-order-by",$(k).attr("for"));g.attr("data-order","0");g.on("click",function(){LayoutListOrder($(this).closest("[ctrl_type=layout_list]").attr("id"),this)});l.append(g)}else{l.append($(k).html())}}e.append(l)});c.append(e)})}function LayoutListOrder(g,b){var h,d,i,c;var a=$(b);var e=$("#"+g);if(!e.attr("data-order-by")){layoutListRefs[g]=GetControlProp(g,"value")}if(a.is("select")){h=a.val().substr(1,a.val().length);d=a.val().substr(0,1);e.find(".ll-order-anchor").attr("data-order",0);e.find("[data-order-by="+JSON.stringify(h)+"]").attr("data-order",d=="0"?"1":"2")}else{if(a.is("a")){h=a.attr("data-order-by");d=a.attr("data-order");e.find(".ll-order-anchor").attr("data-order",0);switch(d){case"0":a.attr("data-order",1);break;case"1":a.attr("data-order",2);break;case"2":a.attr("data-order",0);h=0;break}$("#"+g+"-order").val(h?(d+h):"").selectpicker("refresh")}else{return}}i=d==1?1:-1;c=d==1?-1:1;if(h==0){SetControlProp(g,"value",layoutListRefs[g]);e.removeAttr("data-order-by");return}e.attr("data-order-by",d+h);var f=GetControlProp(g,"value");f.sort(function(l,k){if(l[h]<k[h]){return i}if(l[h]>k[h]){return c}return 0});SetControlProp(g,"value",f)}function LayoutListCreatePagination(c){var b;$("#"+c).attr("data-current-page","1");$("#"+c+" > .list-controls-bottom").remove();var a=$('<div class="_sys_list_control list-controls-bottom text-center"></div>');b=($("#"+c).data("filteredValue")||$("#"+c).data("completeValue")||$("#"+c).find('[ctrl_type="layout_record"]').not("._sys_list_template")).length;a.append('<div class="dataTables_wrapper" role="group"><div class="dataTables_info" id="'+c+'-ll-info"></div><div class="dataTables_paginate"><a id="'+c+'-ll-prev" class="paginate_button previous" onclick="LayoutListPreviousPage(\''+c+'\')">&larr;</a><span id="'+c+'-ll-pages"></span><a id="'+c+'-ll-next" class="paginate_button next" onclick="LayoutListNextPage(\''+c+"')\">&rarr;</a></div></div>");a.find("#"+c+"-ll-prev").attr("title",g_LocalizedStrings.LAYOUT_PREV_PAGE);a.find("#"+c+"-ll-next").attr("title",g_LocalizedStrings.LAYOUT_NEXT_PAGE);if(b!=0){$("#"+c).append(a);LayoutListApplyPagination(c)}}function LayoutListNextPage(c){var b=$("#"+c).attr("data-current-page");var a=Number($("#"+c).attr("data-max-page"));if(b>=a){return}$("#"+c).attr("data-current-page",Number(b)+1);SaveLazyLayoutListValue($("#"+c));LayoutListApplyPagination(c);$("#"+c).trigger("rendered")}function LayoutListPreviousPage(b){var a=$("#"+b).attr("data-current-page");if(a==1){return}$("#"+b).attr("data-current-page",Number(a)-1);SaveLazyLayoutListValue($("#"+b));LayoutListApplyPagination(b);$("#"+b).trigger("rendered")}function LayoutListSetPage(c,b){var a=Number($("#"+c).attr("data-max-page"));if(b<1||b>a){return}$("#"+c).attr("data-current-page",b);SaveLazyLayoutListValue($("#"+c));LayoutListApplyPagination(c);$("#"+c).trigger("rendered")}function LayoutListApplyPagination(h){if($("#"+h).attr("data-paginating")!="true"){return}var m,q,t,f,r,l,k,s,g,w,v;var d=$("#"+h);var b=Number($("#"+h).attr("data-per-page"));m=$("#"+h).children('[ctrl_type="layout_record"]').not("._sys_list_template").not(".hidden-filter");q=parseInt($("#"+h).attr("data-current-page"));f=$("#"+h).find("#"+h+"-ll-prev");r=$("#"+h).find("#"+h+"-ll-next");l=$("#"+h).find("#"+h+"-ll-info");k=$("#"+h).find("#"+h+"-ll-pages");var e=(q-1)*b+1;var a=e+b;if($("#"+h).is("[data-lazy]")){w=d.data("filteredValue");if(w===undefined){w=d.data("completeValue")}g=w.length;v=w.slice(e-1,a-1);if(w.length>0&&!w[0]["_sys_index"]){w.forEach(function(i,c){w[c]["_sys_index"]=c})}}else{g=m.length}if(g===0){e=0;a=1}t=Math.ceil(g/b);d.attr("data-max-page",t);if(q>t){q=t}var u=1;var p=1;l.text("# "+e+"-"+(a>g?g:a-1)+" / "+g);if(q>1){f.removeClass("disabled").removeAttr("disabled")}else{f.addClass("disabled").attr("disabled","disabled")}if(q<t){r.removeClass("disabled").removeAttr("disabled")}else{r.addClass("disabled").attr("disabled","disabled")}k.empty();if(t<6){for(s=1;s<t+1;s++){k.append($('<a class="paginate_button '+(s==q?"current":"")+'" onclick="LayoutListSetPage(\''+h+"',"+s+')">'+s+"</a>").attr("title",LayoutListButtonTitle(s,q)))}}else{if(q<4){for(s=1;s<5;s++){k.append($('<a class="paginate_button '+(s==q?"current":"")+'" onclick="LayoutListSetPage(\''+h+"',"+s+')">'+s+"</a>").attr("title",LayoutListButtonTitle(s,q)))}k.append('<span class="ellipsis">\u2026</span>');k.append($('<a class="paginate_button " onclick="LayoutListSetPage(\''+h+"',"+t+')" >'+t+"</a>").attr("title",LayoutListButtonTitle(t,q)))}else{if(q>t-4){k.append($('<a class="paginate_button " onclick="LayoutListSetPage(\''+h+"',1)\">1</a>").attr("title",LayoutListButtonTitle(1,q)));k.append('<span class="ellipsis">\u2026</span>');for(s=t-4;s<t+1;s++){k.append($('<a class="paginate_button '+(s==q?"current":"")+'" onclick="LayoutListSetPage(\''+h+"',"+s+')">'+s+"</a>").attr("title",LayoutListButtonTitle(s,q)))}}else{var n=q-1;var o=q+1;k.append($('<a class="paginate_button " onclick="LayoutListSetPage(\''+h+"',1)\">1</a>").attr("title",LayoutListButtonTitle(1,q)));k.append('<span class="ellipsis">\u2026</span>');k.append($('<a class="paginate_button previous" onclick="LayoutListSetPage(\''+h+"',"+n+')">'+n+"</a>").attr("title",g_LocalizedStrings.LAYOUT_PREV_PAGE));k.append($('<a class="paginate_button current" onclick="LayoutListSetPage(\''+h+"',"+(q)+')">'+(q)+"</a>").attr("title",LayoutListButtonTitle(q,q)));k.append($('<a class="paginate_button next" onclick="LayoutListSetPage(\''+h+"',"+o+')">'+o+"</a>").attr("title",g_LocalizedStrings.LAYOUT_NEXT_PAGE));k.append('<span class="ellipsis">\u2026</span>');k.append($('<a class="paginate_button" onclick="LayoutListSetPage(\''+h+"',"+t+')">'+t+"</a>").attr("title",LayoutListButtonTitle(t,q)))}}}if($("#"+h).attr("data-lazy")){d.children("div."+cInListClass).removeClass("ll-row-selected");SetLayoutListElements(d,v)}else{$.each(m,function(i,c){$(c).removeClass("even");if(u>=e&&u<a){$(c).removeClass("hidden-pagination");if(p%2!=0){$(c).addClass("even")}p++}else{$(c).addClass("hidden-pagination")}u++})}}function LayoutListButtonTitle(a,b){if(a==b){return g_LocalizedStrings.LAYOUT_CURRENT_PAGE}else{return g_LocalizedStrings.LAYOUT_PAGE_NO.replace("#",a)}}function LayoutListFilter(d,c){var a=$("#"+d);if(a.attr("data-lazy")){SaveLazyLayoutListValue(a);ClearLayoutListElements(a);a.data("renderLimit",0);a.data("filteredValue",GetFilteredLayoutListValue(a));if(a.attr("data-paginating")=="true"){LayoutListApplyPagination(d)}UpdateLayoutListRenderLimit(a)}else{var b=c.trim().toLowerCase().split(" ");if(b.length>0){$("#"+d).children('[ctrl_type="layout_record"]').not("._sys_list_template").each(function(f,e){$(e).removeClass("hidden-pagination");var l=JSON.stringify(GetControlProp($(e).attr("id"),"value")).toLowerCase();var h=true;for(var g=0;g<b.length;g++){if(b[g]===""){continue}if(l.indexOf(b[g])<0){h=false;break}}$(e).toggleClass("hidden-filter",!h)});$("#"+d).attr("data-filtered",c)}else{$("#"+d).removeAttr("data-filtered");$("#"+d).children('[ctrl_type="layout_record"]').not("._sys_list_template").removeClass("hidden-filter")}}if($("#"+d).attr("data-paginating")=="true"){LayoutListApplyPagination(d);LayoutListSetPage(d,1)}else{if($("#"+d).hasClass("list-group-table-striped")){LayoutListApplyStripes(d)}}$("#"+d).trigger("rendered")}function LayoutListApplyStripes(c){var b=1;var a=$("#"+c).children('[ctrl_type="layout_record"]').not("._sys_list_template").not(".hidden-filter");$(a).each(function(e,d){$(d).removeClass("even");if(b%2!=0){$(d).addClass("even")}b++})}function LayoutListGetSelectedRows(c,a){var b=[];$("#"+c+" > .ll-row-selected").each(function(d,f){b.push($(f).attr("id"))});return a=="first"?b[0]:b}function RefreshCollapsibleControls(a){RecalcControls($(a),false)}function UpdateLayoutListRenderLimit(r){if(!r.is("[data-lazy][ctrl_type=layout_list]:visible")){return}for(var k=0;k<5;k++){var l=r.data("renderLimit");var p=r.data("filteredValue")!==undefined?r.data("filteredValue"):r.data("completeValue");var m=p.length;if(r.attr("data-paginating")==="true"&&r.attr("data-per-page")){m=Math.min(m,Number(r.attr("data-per-page")))}if(l>=m){SetLayoutListBusyState(r,false);return}SetLayoutListBusyState(r,true);var c=window.innerHeight;var h=r.attr("data-size")!=="cards"?r[0].getBoundingClientRect().bottom:r.children().last()[0].getBoundingClientRect().bottom;if(h<0||h>1.25*c){SetLayoutListBusyState(r,false);return}var f;var d=r.children("."+cInListClass).last().height();if(r.attr("data-size")==="cards"){var e=Number(r.attr("data-card-number"));var b=r.children("."+cInListClass).length;f=(e-(b%e))+e}else{if(d){f=Math.ceil(c/d)}else{f=1}}if(l+f>m){f=m-l}var q=l+f;var n=Number(r.attr("data-current-page")||1);var a=(n-1)*(r.attr("data-per-page")||0);var o=a+l;var i=o+f;var g=p.slice(o,i);AddLayoutListElements(r,f);SetLayoutListElements(r,g,l);r.data("renderLimit",q);r.trigger("rendered")}SnapSysError("Loop trap triggered in UpdateLayoutListRenderLimit()")}function OnOnePageLoad(){if(g_TopFrame.OnClientActivity){$("*").on("click keydown",g_TopFrame.OnClientActivity)}$("input[data-inputmask]").inputmask();$("input[maxlength]").each(function(){SetInputWidth(this)});$("input[maxlength]").on("recalcWidth",function(){SetInputWidth(this)});$("select[id]").off("updateSelects").on("updateSelects",function(){$(this).selectpicker("refresh")});$('select[id][data-source!="datatable"]').each(function(){var e=!!$(this).attr("data-livesearch");$(this).selectpicker({liveSearch:e,liveSearchNormalize:e,liveSearchPlaceholder:$(this).find("option[data-placeholder]").text(),noneSelectedText:g_LocalizedStrings.SELECTMENU_PLACEHOLDER,noneResultsText:g_LocalizedStrings.SELECTMENU_NO_RESULTS})});$('select[id][data-tooltip],select[id][data-toggle="tooltip"]').each(function(){var e=$(this);var k=e.closest(".visible-wrapper").find("button");$.each(["data-placement","data-original-title"],function(m,l){k.attr(l,e.attr(l))});k.attr("data-tooltip",true);k.attr("title",null)});$('[data-tooltip="true"],[data-toggle="tooltip"]').not("._sys_list_template *").tooltip();$(".panel-heading>i").each(function(){var e=$(this);var m=e.closest(".panel-heading").next();var k=!m.hasClass("in");var l=m.attr(k?"data-collapsed-icon":"data-expanded-icon");e.text(l||"")});var c=$('div[data-role="collapsible"]');c.on("shown.bs.collapse",function(){$(this).prev().children("i").text($(this).attr("data-expanded-icon")||"")});c.on("hidden.bs.collapse",function(){$(this).prev().children("i").text($(this).attr("data-collapsed-icon")||"")});try{if($.fn.dataTable){$.fn.dataTable.ext.errMode="throw";if(navigator.userAgent.indexOf("MSIE")==-1&&navigator.userAgent.indexOf("Trident")==-1){if(window.Intl){var f=new Intl.Collator();var d=$.fn.dataTable.ext.type;delete d.order["string-pre"];d.order["string-asc"]=f.compare;d.order["string-desc"]=function(k,e){return -f.compare(k,e)}}}}$("table").not("._sys_list_template *").trigger("initDT",[null,null,null])}catch(h){SnapSysError("Error in initDT",h)}try{$("div.date").trigger("initDTP")}catch(h){SnapSysError("Error in initDTP",h)}try{$('[ctrl_type="chart"]').trigger("initCHART")}catch(h){SnapSysError("Error in initCHART",h)}try{$('input,textarea,[ctrl_type="selectmenu"]').trigger("initREQUIRED").trigger("initshiwa")}catch(h){SnapSysError("Error in initREQUIRED",h)}try{$('div[ctrl_type="google_map"], div[ctrl_type="google_map_streetview"]').trigger("initMaps")}catch(h){SnapSysError("Error in initMaps",h)}try{$('div[ctrl_type="pivot_table"]').trigger("initPivots")}catch(h){SnapSysError("Error in initPivots",h)}if($("iframe.autoframe").length>0){$("iframe.autoframe").iFrameResize({checkOrigin:false,bodyMargin:".5em",heightCalculationMethod:"taggedElement",tolerance:48})}$(".bxslider.bxslider-captions img").each(function(){$(this).attr("title",$(this).attr("alt"))});$(".bxslider").each(function(){var e=$(this).attr("id");var l={auto:$(this).hasClass("bxslider-auto"),pause:$(this).attr("bxslider-pause"),captions:$(this).hasClass("bxslider-captions"),pager:$(this).hasClass("bxslider-pager"),controls:$(this).hasClass("bxslider-controls"),onSlideAfter:function(){$("#"+e).trigger("control_change")},maxSlides:$(this).attr("bxslider-maxslides"),slideWidth:$(this).attr("bxslider-slidewidth")||($(this).attr("bxslider-maxslides")?$("body").width()/$(this).attr("bxslider-maxslides"):0),moveSlides:1};var k=$(this).bxSlider(l);$(this).data("carouselObject",k);$(this).data("carouselSettings",l)});$("#thePage").on("click","._sys_tree_branch>span",function(){$(this).closest("li").toggleClass("closed")});$('[ctrl_type="rich-text"]').each(function(l,m){var n=$(m);var k=CKEDITOR.appendTo(n.attr("id"),{disableNativeSpellChecker:false,readOnly:n.hasClass("snap-readonly")||n.parents().hasClass("snap-readonly"),removeButtons:"Image,About,Anchor,Source,PasteFromWord,SpellChecker,Scayt",removePlugins:"wsc,scayt"});k.on("change",function(){if(n.attr("data-set")){n.removeAttr("data-set")}else{n.attr("data-changed",true);n.trigger("input")}});k.on("blur",function(){if(n.attr("data-changed")){n.removeAttr("data-changed").trigger("control_change")}});n.data("ckeditor",k)});c.on("shown.bs.collapse",function(k){RecalcControls($(k.target))});$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(k){RecalcControls($(k.target.hash))});var b=$("div[data-has-reveal-buttons]");if(b.length>0){$('<i class="hidden material-icons snap-reveal-button snap-nav-button" onclick="RevealNavPanel();">menu</button>').prependTo(b);$('<i class="hidden material-icons snap-reveal-button snap-adv-button" onclick="RevealAdvPanel();">more_vert</button>').appendTo(b)}window.addEventListener("resize",OnOnePageResize);OnOnePageResize();$("#thePage").scrollTop(0);$(".snap-disabled :input").prop("disabled",true);$(".snap-readonly :input").prop("readonly",true);$("div.timeline").each(function(){try{var k=new vis.Timeline($(this)[0],$(this).data("timelineItems"),$(this).data("timelineGroups"),$(this).data("timelineOptions"));$(this).data("timelineObject",k);k.setOptions({zoomable:false});if(navigator.userAgent.indexOf("MSIE")!==-1){k.on("click",function(e){if(e.item){k.setSelection([e.item])}else{k.setSelection([])}})}}catch(l){SnapSysError("Error initializing .timeline#"+$(this).id+" ",l)}});$("div.timeline").on("wheel",function(l){if($(this).data("timelineOptions").zoomable===false){return}var k=$(this).data("timelineObject").getWindow();var m=k.end-k.start;if(l.originalEvent.deltaY<0){$(this).data("timelineObject").setWindow(new Date(k.start.getTime()+m/4),new Date(k.end.getTime()-m/4),{animation:{duration:125,easingFunction:"easeInOutQuad"}})}else{$(this).data("timelineObject").setWindow(new Date(k.start.getTime()-m/2),new Date(k.end.getTime()+m/2),{animation:{duration:125,easingFunction:"easeInOutQuad"}})}l.preventDefault()});if($("div[ctrl_type=layout_list][data-lazy]").length>0){document.getElementById("thePage").addEventListener("scroll",function(){if(g_scrollListenerID){return}g_scrollListenerID=window.setTimeout(function(){g_scrollListenerID=0;var e=$("#thePage").scrollTop();$("div[ctrl_type=layout_list][data-lazy]").each(function(){UpdateLayoutListRenderLimit($(this))});$("#thePage").scrollTop(e)},100)},{passive:true})}$("html, body").on("keypress",function(k){if(k.keyCode==13){PerformClickOnShortcut("ENTER",k)}});$("html, body").on("keydown",function(k){if(k.keyCode==27){PerformClickOnShortcut("ESC",k)}});ProcessPageParams();var a=$("html");if(a.data("dictionary")&&typeof a.data("dictionary")==="object"){var g=a.data("dictionary"),i=g_TopFrame.g_defaultLanguage;if(!g[i]){g[i]=({})}$("[id]").each(function(){var m=$(this);var e;var k=Control_type_of_$(m);if(!k){return}else{if(k==="datatable_header"){e=m.closest("table").attr("id")+"."+m.attr("id")}else{e=m.attr("id")}}if(HasPrefix(e,cListItemPrefix)){return}var l=cControlProperties[k]||[];l.forEach(function(o){var n=o[1];if($("#"+e+"[ctrl_type]").length!==1){return}if(cLocalizableProperties.indexOf(n)>=0){g[i][e+"."+n]=GetControlProp(e,n)}})});a.data("dictionary",g).attr("lang",g_TopFrame.g_defaultLanguage);SetLanguage($(g_TopFrame.document).children("html").attr("lang"))}SetPanelLoaded(Get_sys_FrameNonce(),document.pageID,document.pageName,b.length>0,window.location.search);if(window.top.location.hash!==""&&window.top.location.hash!=="#"){ShowSubpage(window.top.location.hash.replace(/#|,.*/g,""))}else{SetWindowTitle($("[ctrl_type=main").first().attr("data-page_title")||g_TopFrame.g_IndexTitle)}$("#thePage").addClass("in");if(g_TopFrame.g_log_load_times&&window.location.search.indexOf("&panel=M")>-1){$("body").on("init",function(){var e=new Date().getTime()-new Date(performance.timing.navigationStart);SecureAJAX("doPageTimeLog.php",{data:{LoadTime:e,TabID:g_TopFrame.g_tabId}})})}$("body").trigger("init")}function OnOnePageUnload(){$("*").off()}function SumHeights(b){var a=15;$("#theHTML>"+b).each(function(){a+=$(this).height()});return a}function OnOnePageResize(){$(".snap-nav-button").toggleClass("hidden",!GetPanelLoaded("L")||GetPanelUniv("L","visible"));$(".snap-adv-button").toggleClass("hidden",!GetPanelLoaded("R")||GetPanelUniv("R","visible"));$(".bxslider[bxslider-maxslides]").each(function(){var d=$(this).data("carouselObject");var b=$(this).data("carouselSettings");if(!d||!b){return}if(!$(this).attr("bxslider-slidewidth")){b.slideWidth=$(window).width()/$(this).attr("bxslider-maxslides");$(this).find("img").each(function(){$(this).attr("title",$(this).attr("alt"))});d.reloadSlider(b)}});$("table.dataTable").removeClass("snap-recalc-ok");var a=$('#theHTML>[ctrl_type="main"]:not(.hidden)');a.css("padding-top",SumHeights(".navbar-fixed-top")+"px");a.css("padding-bottom",SumHeights(".navbar-fixed-bottom")+"px");$('[ctrl_type="layout_list"][data-lazy]').each(function(){UpdateLayoutListRenderLimit($(this))})}function ShowSubpage(b){var a=$('#theHTML>[ctrl_type="main"]');a.addClass("hidden");if(b&&a.filter("#"+b).length>0){SetControlProp(b,"visible",true);SetWindowTitle($("#"+b).attr("data-page_title")||g_TopFrame.g_IndexTitle)}else{SetControlProp(a.first().attr("id"),"visible",true);SetWindowTitle(a.first().attr("data-page_title")||g_TopFrame.g_IndexTitle)}OnOnePageResize();$("html,body,#thePage").scrollTop(0)}PassToTopFrame("WebStorage_set");PassToTopFrame("WebStorage_get");function NormalizeColor(b){if(b.match(/^#[0-9A-F]+/i)){return b}var d;if(b.substr(0,4)==="rgb("){d=b}else{var c=$("<div></div>").appendTo("#thePage");c.css("color",b);d=window.getComputedStyle(c[0]).color;c.remove()}var a="#";d.split(",").forEach(function(g,e){if(e>=3){return}var f=parseInt(g.replace(/[^0-9\.]/g,"").trim()).toString(16);while(f.length<2){f="0"+f}a+=f});return a}function IsNullOrEmpty(b){if(typeof b==="undefined"||b===null){return true}else{if(typeof b==="string"){return b===""}else{if($.isArray(b)){return b.length===0}else{if($.isPlainObject(b)){return $.isEmptyObject(b)}}}}return false}function SetInputWidth(a){var c;var b=0;var a=$(a);if(a.attr("ctrl_type")=="datetime-input"){c=(14*Number(a.attr("maxlength"))+62);a.parent().css("max-width",c+"px");if(a.parent().parent().hasClass("_sys_help")){a.parent().parent().find("a._sys_help").css("left",(c+10)+"px").css("right","auto")}else{if(a.parent().parent().parent().hasClass("_sys_help")){a.parent().parent().find("a._sys_help").css("left",(c+20)+"px").css("right","auto")}}}else{c=(14*Number(a.attr("maxlength"))+26);a.css("max-width",c+"px");if(a.parent().hasClass("input-group")){var b=0;a.parent().children().each(function(d,f){if(!$(f).is("input")){b+=$(f).outerWidth()}});b+=c-2;a.parent().css("max-width",b+"px")}if(b!=0){c=b}if(a.parent().hasClass("_sys_help")){a.parent().find("a._sys_help").css("left",(c+10)+"px").css("right","auto")}else{if(a.parent().parent().hasClass("_sys_help")){a.parent().parent().find("a._sys_help").css("left",(c+10)+"px").css("right","auto")}}}}function ToggleExpandableSet(b){var f=event;if(!$(f.target).parent().parent().hasClass("bootstrap-select")){f.stopPropagation()}var d=$(b).closest("._sys_expandable");if(d.hasClass("disabled")){return}var a=d.find(" > ._sys_expandable_content");var c=d.attr("data-in-ll");if(((!$(f.target)[0].hasAttribute("ctrl_type")&&$(f.target).hasClass("form-group"))||$(f.target).is("[readonly]")||$(f.target).is("[disabled]")||$(f.target).attr("ctrl_type")=="text"||f.currentTarget==f.target)||$(f.target).parent().hasClass("_sys_expandable_toggle")){if(d.hasClass("open")){a.slideUp(200);d.removeClass("open");d.triggerHandler("hidden.bs.collapse")}else{if(c=="true"){d.closest(".list-group").find("._sys_expandable.open").each(function(g,e){CloseExpandableSet($(e).attr("id"))})}a.slideDown(200);d.addClass("open");RecalcControls(a);d.triggerHandler("shown.bs.collapse")}}}function OpenExpandableSet(b){var c=$("#"+b);var a=$(c.find("._sys_expandable_content")[0]);if(!c.hasClass("open")){c.addClass("open");a.slideDown(200);RecalcControls(c,false);c.trigger("shown.bs.collapse")}}function CloseExpandableSet(b){var c=$("#"+b);var a=$(c.find("._sys_expandable_content")[0]);if(c.hasClass("open")){c.removeClass("open");a.slideUp(200);c.trigger("hidden.bs.collapse")}}function GetLanguage(){return $("html").attr("lang")||g_TopFrame.g_defaultLanguage||"en"}function SetLanguage(d){var c=d||g_TopFrame.g_defaultLanguage;if(!c.match(/^[A-Za-z]{1,16}$/)){return}if(c===GetLanguage()){return}var a=$("html");var b=[];if(a.data("dictionary")&&a.data("dictionary")[c]){b=a.data("dictionary")[c]}$.each(b,function(f,g){if(g===undefined){return}var e=f.lastIndexOf(".");if(e<0){return}SetControlProp(f.substring(0,e),f.substring(e+1),g)});if(g_TopFrame.g_Localization[d]){g_LocalizedStrings=g_TopFrame.g_Localization[d];g_IsRequiredField=g_LocalizedStrings.REQUIRED_FIELD;g_DateTimeSettings=g_LocalizedStrings;$("div.invalidation_message").not(":empty").text(g_IsRequiredField);$('[ctrl_type="layout_list"][data-paginating]').each(function(){LayoutListApplyPagination($(this).attr("id"))})}else{RunTimeError("SetLanguage(): language not found",d)}if($('div[ctrl_type="ctr-calendar"]').length>0){$('div[ctrl_type="ctr-calendar"]').each(function(f,g){$(g).fullCalendar("option","locale",d)})}if($('input[ctrl_type="datetime-input"]').length>0){$('input[ctrl_type="datetime-input"]').each(function(f,g){$(g).parent().data("DateTimePicker").locale(d)})}a.attr("lang",c);$(g_TopFrame.document).children("html").attr("lang",d);if(window.sessionStorage){window.sessionStorage.setItem("language",d)}if($('input[ctrl_type="number-input"]').length>0){$('input[ctrl_type="number-input"]').each(function(f,g){$(g).trigger("control_change")})}}function GetLocalizedText(c){var d=null;var b=GetLanguage();var a=$("html");if(a.data("dictionary")&&a.data("dictionary")[b]){d=a.data("dictionary")[b][c]}return d||c||""}function InitMap(c,a){var b=c.getAttribute("data-type");if(!a){c.gMap=new google.maps.Map(c,{center:{lat:-34.397,lng:150.644},zoom:1,mapTypeId:b});return}if(b==="streetview"){InitStreetView(a,c.id)}else{c.gMap=new google.maps.Map(c,{mapTypeId:b});SetControlProp(c.id,"locations",a)}}function convertStringLocation(a){return{address:a,heading:0,pitch:0}}function convertObjectLocationParameters(a){return{address:a.address,latitude:a.latitude,longitude:a.longitude,heading:((a.heading==null)||isNaN(a.heading))?0:a.heading,pitch:((a.pitch==null)||isNaN(a.pitch))?0:a.pitch,infowindow:a.infowindow,markertype:a.markertype}}function getFirstValidLocationForStreetview(a){var b=0;while(!a[b]&&a.length!==0){a.splice(b,1)}return a[b]}function removeEmptyLocationItems(a){var b=0;var c=[];while(b<a.length){if(typeof a[b]==="string"){c.push({address:a[b]})}else{if(typeof a[b]==="object"&&a[b]){c.push(a[b])}}b++}if(c.length>0){return c}}function storeGeocode(b,a){window.sessionStorage.setItem(b,JSON.stringify(a))}function getGeocode(a){return JSON.parse(window.sessionStorage.getItem(a))}var overQueryCount=0;function getAddress(h,c,f,g,i,a,e){var b=getGeocode(h);if(b){SetMarkers(b,c,f,g,i,a,e)}else{var d=new google.maps.Geocoder();d.geocode({address:h},function(m,l){if(l===google.maps.GeocoderStatus.OK){HideSpinner();var k=m[0].geometry.location;storeGeocode(h,k);SetMarkers(k,c,f,g,i,a,e)}else{if(l===google.maps.GeocoderStatus.OVER_QUERY_LIMIT){ShowSpinner();overQueryCount++;setTimeout(function(){getAddress(h,c,f,g,i,a,e)},overQueryCount*10);setTimeout(function(){HideSpinner()},overQueryCount*10)}else{if(l===google.maps.GeocoderStatus.ERROR){RunTimeError("The Geocoder service replied an error.")}}}})}}function SetMarkers(k,b,g,h,l,a,e){if(!b||b.mapTypeId==="streetview"){InitStreetView(l,h);return}var d;if(k.hasOwnProperty("latitude")&&k.hasOwnProperty("longitude")){if(k.infowindow){d=k.infowindow}k=new google.maps.LatLng(k.latitude,k.longitude)}if(l.markertype){l.markertype="get_image.php?img="+l.markertype}var f=new google.maps.Marker({map:b,position:k,animation:g==="TRUE"?google.maps.Animation.DROP:null,icon:l.markertype,id:h,order:e});if(l&&l.infowindow&&typeof l.infowindow=="string"){f.infowindow=new google.maps.InfoWindow({content:l.infowindow});f.addListener("click",function(){this.infowindow.open(this.map,this)})}if(d&&typeof d=="string"){f.infowindow=new google.maps.InfoWindow({content:d});f.addListener("click",function(){this.infowindow.open(this.map,this)})}b.markers.push(f);var i=parseInt(b.getDiv().getAttribute("data-zoom"));if(i!==0){var c=getLastMarker(b.markers);b.setZoom(i);b.setCenter(c.getPosition())}else{a.extend(f.position);if(b.markers.length===1){b.setZoom(14)}else{b.fitBounds(a);b.panToBounds(a);b.setZoom(b.zoom)}b.setCenter(a.getCenter())}}function getLastMarker(c){var b=c[0];for(var a=1;a<c.length;a++){if(c[a].order>b.order){b=c[a]}}return b}function InitStreetView(b,a){if(b instanceof Array){b=getFirstValidLocationForStreetview(b)}if(typeof b==="object"&&!b.length){b=convertObjectLocationParameters(b)}else{if(typeof b==="string"){b=convertStringLocation(b)}}if(b.latitude!=null&&b.longitude!=null){document.getElementById(a).gMap=new google.maps.StreetViewPanorama(document.getElementById(a),{mapTypeId:"streetview",position:{lat:b.latitude,lng:b.longitude},pov:{heading:b.heading,pitch:b.pitch},zoom:parseInt(document.getElementById(a).getAttribute("data-zoom"))})}else{if(b.address){var c=new google.maps.Geocoder();c.geocode({address:b.address},function(e,d){if(d===google.maps.GeocoderStatus.OK){HideSpinner();document.getElementById(a).gMap=new google.maps.StreetViewPanorama(document.getElementById(a),{mapTypeId:"streetview",position:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()},pov:{heading:b.heading,pitch:b.pitch},zoom:parseInt(document.getElementById(a).getAttribute("data-zoom"))})}else{if(d===google.maps.GeocoderStatus.OVER_QUERY_LIMIT){ShowSpinner();overQueryCount++;b={address:b.address};setTimeout(function(){InitStreetView(b,a)},overQueryCount*10);setTimeout(function(){HideSpinner()},overQueryCount*10)}else{if(d===google.maps.GeocoderStatus.ERROR){RunTimeError("The Geocoder service replied an error.")}}}})}}}function DoLogin(b,d,e,c,a,f,g){SecureAJAX("log_in.php",{data:{user:b,pass:d},dataType:"json",timeout:a*1000,success:function(h){if(h){if(g){g_TopFrame.location.href="../index.php?page_id="+g}else{if(g_TopFrame.g_UrlParams.redirect){g_TopFrame.location.href=g_TopFrame.g_UrlParams.redirect}else{g_TopFrame.location.reload(false)}}}else{e()}},error:function(h,k,i){AjaxError("DoLogin",h,k,i);if(k==="timeout"){f()}else{c(h)}}})}function DoLogout(a){WebStorage_get(localStorage,"REMOVE","SNAP_CLIENT_TIMEOUT");SecureAJAX("log_out.php",{dataType:"json",success:function(){sessionStorage.clear();g_TopFrame.location.href="../index.php"+(a?"?page_id="+a:"")}})}function DoSocialAction(b,c){var a={facebook:"../snut/social_actions/action_by_facebook.php",google:"../snut/social_actions/action_by_google.php",twitter:"../snut/social_actions/action_by_twitter.php",linkedin:"../snut/social_actions/action_by_linkedin.php"};SecureAJAX(a[b],{data:{current_location:g_TopFrame.location.href,social_action:c},dataType:"json",success:function(d){if(typeof d.loginUrl!="undefined"){g_TopFrame.location.href=d.loginUrl}else{if(typeof d.errorMsg!="undefined"){var e=new URL(g_TopFrame.location.href);e.searchParams.set("error",d.errorMsg);g_TopFrame.location.href=e.href}else{DoConsoleLog(d)}}},error:function(d){DoConsoleLog(d)}})}PassToTopFrame("RegisterTimeoutClockHandler");PassToTopFrame("LoadTimeoutLogoutPage");function OnInvalidSession(){if(g_LocalizedStrings.PROCESS_NOT_AUTHORIZED_CONTENT){CloseMessageDlg();MessageDlg("",g_LocalizedStrings.PROCESS_NOT_AUTHORIZED_TITLE||"",g_LocalizedStrings.PROCESS_NOT_AUTHORIZED_CONTENT,"O",{onOK:LoadTimeoutLogoutPage},{btnOK:g_LocalizedStrings.PROCESS_NOT_AUTHORIZED_BUTTON||"OK"},null,"default")}else{LoadTimeoutLogoutPage()}}function OnSuggestionPanelKeydown(){var e=$(this).parent(),a=e.children("ul"),c=e.find("li"),b=c.filter(".active"),d=e.children("input");switch(event.keyCode){case 13:if(b.length>0){a.remove();d.val(b.text()).trigger("change")}break;case 27:a.remove();break;case 38:if(b.length==0){c.last().addClass("active")}else{b.removeClass("active").prev().addClass("active")}break;case 40:if(b.length==0){c.first().addClass("active")}else{b.removeClass("active").next().addClass("active")}break}}function OnSuggestionInputBoxFocused(){$(this).parent().find("ul").show()}function OnSuggestionInputBoxBlurred(){$(this).parent().find("ul").hide()}function DS_DeleteOneRecord(b,c,a){MessageDlg("Confirmation","",'Are you sure to delete the "'+c+'" record?',"YN",{onYes:function(){DoAjaxCall2("editor_ops.php",{op:"ds_delete_one_record",DataSetID:b,RecordID:c},"POST",function(){a.remove().draw()},function(d){MessageDlg("Warning","Operation failed.",GetFieldOfObject("responseText",d,false),"O",{},{},"","")},null,0,function(){MessageDlg("Warning","Operation timed out.","Try again.","O",{},{},"","")},null,false)}},{btnYes:"Delete",btnNo:"Cancel"},"","");return false}function IsPushEnabled(b,e,c){if(!("serviceWorker" in navigator&&"Notification" in window&&navigator.userAgent.indexOf("Edg")<0)){c&&c();return}var a=b,d=e;navigator.serviceWorker.getRegistrations().then(function(f){if(f.length>0){a&&a()}else{d&&d()}},e)}function EnablePush(a,b){if(!("serviceWorker" in navigator)){b("Service workers are not supported by this browser.");return}if(!("Notification" in window)){b("Notifications are not supported by this browser.");return}if(!(g_TopFrame.g_PushPublicKey)){b("Push public key is not configured.");return}if(navigator.userAgent.indexOf("Edg")>=0){b("Edge browser is not supported yet.");return}Notification.requestPermission().then(function(c){if(c==="granted"){navigator.serviceWorker.getRegistrations().then(function(d){if(d.length>0){d[0].unregister()}}).then(function(){navigator.serviceWorker.register(g_RepoRelURL+"sw.js?_="+(new Date()).valueOf()+"&key="+g_TopFrame.g_PushPublicKey).then(a,b)},b)}else{b&&b()}})}function DisablePush(){if(!navigator.serviceWorker){return}navigator.serviceWorker.getRegistrations().then(function(a){if(a.length>0){a[0].unregister()}})}function GetNotificationPermission(b,a,c){if(typeof Notification==="undefined"){c();return}Notification.requestPermission().then(function(d){if(d==="granted"){b()}else{a()}})}function ShowNotification(f,c,b){var e=(typeof Notification!=="undefined")&&(Notification.permission==="granted");if(!e){return}var a;if(b.match(/^[0-9]+$/)){a=g_TopFrame.location.toString().replace(/\?.*$/,"")+"?page_id="+b}else{a=b}var d=new Notification(f,{body:c,icon:"/favicon.ico",requireInteraction:true,vibrate:[300,300]});if(a!=""){d.onclick=function(){window.open(a);this.close()}}}function GetCurrentPosition(b,a,c){if(!navigator.geolocation){c()}navigator.geolocation.getCurrentPosition(function(d){var e=d.coords;b([e.latitude,e.longitude])},function(d){if(d.code===d.PERMISSION_DENIED){c()}else{a()}})}function GetSelectedRowNumber(d){var b=$("#"+d).DataTable();if(b.settings()[0]._select.style!=="single"){return 0}var c=b.rows({selected:true});var a=c.indexes().toArray();if(a.length===1){return 1+a[0]}else{return 0}}function AddColumnSearchForDatatable(c){var b=$("#"+c).DataTable();var a=$("#"+c).data("col_search_type");b.state.clear();$("#"+c+" thead th").each(function(d){var f=$(this).text();var e=$(this).closest("thead");if(typeof a!="undefined"){switch(a[d]){case"text":e.find("tr:eq(1) td").eq(d).append($('<input class="input-filter" type="text">').attr("placeholder",f));break;case"select":e.find("tr:eq(1) td").eq(d).append('<select data-source="datatable" class="select-filter"><option value=""></option></select>');break}}e.find("tr:eq(1) td").eq(d).removeClass("sorting_asc")});b.columns().every(function(d){if(typeof a!="undefined"){switch(a[d]){case"text":$("input",b.column(d).header()).on("input",function(){var e=$(this).closest(".dataTables_scroll")[0]?$(this).closest(".dataTables_scroll").find(".dataTables_scrollBody table").DataTable():$(this).closest("table").DataTable();if(this.value==" "){e.columns(d).search("^$",true,false).draw()}else{e.columns(d).search(this.value).draw()}});$("input",b.column(d).header()).on("click",function(f){f.stopPropagation()});break;case"select":$("select",b.column(d).header()).on("change",function(){var e=$(this).closest(".dataTables_scroll")[0]?$(this).closest(".dataTables_scroll").find(".dataTables_scrollBody table").DataTable():$(this).closest("table").DataTable();if(this.value==" "){e.columns(d).search("^$",true,false).draw()}else{e.columns(d).search(this.value,false,false).draw()}});$("select",b.column(d).header()).on("click",function(f){f.stopPropagation()});break}}})}function RefillSearchSelect(){var g=$(this);var d=g.DataTable();var c=g.data("col_search_type");var e=g.data("col_data_kind");var f=function(i,h){i=parseFloat(i);h=parseFloat(h);if(isNaN(i)){i=0}if(isNaN(h)){h=0}return i-h};var a=function(i,h){i=i.replace(/[^\d\-\.]/g,"");h=h.replace(/[^\d\-\.]/g,"");return f(i,h)};var b=function(i,h){return(i+"").localeCompare(h+"")};d.columns().every(function(m){if(d.column(m).visible()&&typeof c!="undefined"&&c[m]=="select"){var k=$(d.column(m).header()).index();if(g.parent().hasClass("dataTables_scrollBody")){var h=g.closest(".dataTables_scroll").find(".dataTables_scrollHead thead tr:eq(1) td").eq(k).find("select.select-filter")}else{var h=g.find("thead tr:eq(1) td").eq(k).find("select.select-filter")}var l=h.val();h.empty().append('<option value=""></option>');var n=b;switch(e[m]){case"number":n=f;break;case"currency":n=a;break}d.column(m).data().unique().sort(n).each(function(p){var i=RenderDatatableCell(e[m],p,null,null,g,m);if(typeof p=="undefined"||p==null||p==""||i==""){p=" ";i="-"}var o=$("<option>").attr("selected",p==l).attr("value",i).text(i);if(i=="-"){if(h.find('option[value=" "]').length==0){h.find("option").first().after(o)}}else{h.append(o)}})}})}function CreatedCellHandler(f,a,d,e,c){if(!this.attr("hasCellCreatedEvent")){return}var b=this.DataTable().columns(c).header()[0].id;this.trigger("createdCell",[a,e,c,b])}function CheckElementVisible(c){var b=document.getElementById(c).getBoundingClientRect();var a=Math.max(document.documentElement.clientWidth,window.innerWidth);return b.left>0&&b.right<=a}function CheckForDatatableInViewport(a){$("#"+a+" thead tr:nth-child(2)").css("display","");if(!CheckElementVisible(a)){$("#"+a+" thead tr:nth-child(2)").css("display","none")}}function OnResponsiveResize(a,e,d){var f=$(a.target);var c=f.find("thead tr:nth-child(2)").children();for(var b=0;b<d.length;b++){c.eq(b).toggleClass("hidden",!d[b])}}function AddColumnToggleForDatatable(d){var b=$("#"+d).DataTable();var c=$("#"+d).data("col_toggles");var a=$("<select multiple></select>");b.columns().every(function(e){if(c[e]){var f=$("<option>").attr("value",e).attr("selected",b.column(e).visible()).text($(b.column(e).header()).text());a.append(f)}});a.on("change",function(){var e=$(this).val();if(null==e){e=[]}b.columns().every(function(f){if(c[f]){b.column(f).visible(e.indexOf(f+"")>-1)}})});$("#"+d+"_filter").find("select").remove();$("#"+d+"_filter").append(a);$("#"+d).on("column-visibility.dt",function(i,g,f,h){a.find('option[value="'+f+'"]').prop("selected",h);a.selectpicker("refresh")});a.selectpicker({dropdownAlignRight:"auto",selectedTextFormat:"count",noneSelectedText:"-",countSelectedText:function(f,e){return f+"/"+e}})}function Assert(a,b){b=b||"Assertion failed";if(a){return}switch(g_TopFrame.g_assertMode){case"ignore":return;case"warn":RunTimeError(b);return;case"error":default:throw b}}function CalendarSetUpAccessibility(a){$("#"+a).find(".fc-prev-button").attr("aria-label",g_LocalizedStrings.CAL_PREV_BUTTON);$("#"+a).find(".fc-next-button").attr("aria-label",g_LocalizedStrings.CAL_NEXT_BUTTON);$("#"+a).find(".fc-today-button").attr("aria-label",g_LocalizedStrings.CAL_TODAY_BUTTON);$("#"+a).find(".fc-month-button").attr("aria-label",g_LocalizedStrings.CAL_MONTH_BUTTON);$("#"+a).find(".fc-agendaWeek-button").attr("aria-label",g_LocalizedStrings.CAL_WEEK_BUTTON);$("#"+a).find(".fc-agendaDay-button").attr("aria-label",g_LocalizedStrings.CAL_DAY_BUTTON);$("#"+a).find(".fc-list-button").attr("aria-label",g_LocalizedStrings.CAL_LIST_BUTTON)}function NumberInputSetUp(b){var a=$("#"+b);a.attr("data-previous-decimal-sep",NumberSeparator("decimal"));a.attr("data-previous-group-sep",NumberSeparator("group"));a.on("input",function(c){if(c.originalEvent&&c.originalEvent.inputType=="insertFromDrop"){NumberInputChangeValidate(c)}else{c.preventDefault()}});a.on("keydown",function(c){NumberInputChangeValidate(c,"keydown")});a.on("control_change",function(c){NumberInputChangeValidate(c,"control_change")});a.on("control_valuechanged",function(c){NumberInputChangeValidate(c,"control_valuechanged")});a.on("blur",function(c){NumberInputBlurValidate(c,"blur")});a.bind("paste",function(c){NumberInputPasteValidate(c,"paste")})}function NumberInputContinuosValidate(a){var d=a||window.event;var b=d.keyCode||d.which;b=String.fromCharCode(b);if(d.shiftKey){return}var c=/^[-0-9,. ]|\./;if(!c.test(b)){d.returnValue=false;if(d.preventDefault){d.preventDefault()}}}function NumberInputPasteValidate(i){var d=i||window.event;var h=event.clipboardData.getData("text/plain");var g=/^[-0-9,. ]|\./;if(!g.test(h)){d.returnValue=false;if(d.preventDefault){d.preventDefault()}}else{var b=$(i.currentTarget);var c=b.val();if(c==""){b.val(h)}else{var a=i.currentTarget;var e=a.selectionStart;var f=a.selectionEnd;if(e==f){c=c.substring(0,f)+h+c.substring(f);f=f+h.length;b.val(c);SetCaretPosition(a,f)}else{c=c.substring(0,e)+h+c.substring(f);f=f-(f-e)+h.length;b.val(c);SetCaretPosition(a,f)}}NumberInputChangeValidate(i)}}function NumberInputChangeValidate(q,x){var c=q||window.event;var y=c.keyCode||c.which;y=String.fromCharCode(y);var b=c.key;var e=q.currentTarget;var u=$(q.currentTarget);var z=u.val();var t=u.attr("data-previous-value");var i=NumberSeparator("decimal");var n=NumberSeparator("group");var a=u.attr("data-previous-decimal-sep");var d=u.attr("data-previous-group-sep");if(d=="&nbsp;"){d==" "}var l=u.attr("data-fill-decimals")=="FALSE"?false:true;var A=u.attr("data-decimals")?u.attr("data-decimals"):0;var w=e.selectionStart;var s=e.selectionEnd;var r=w==s?z.substring(0,s):z.substring(0,w);var p=false;var m=false;var g=/^[-0-9,. ]|\./;if(!g.test(z)&&z!==""){u.val("");return}if((c.shiftKey&&(b=="ArrowLeft"||b=="ArrowRight"))||b=="Shift"||b=="ArrowLeft"||b=="ArrowRight"||b=="Home"||b=="End"||b=="Tab"||b=="Escape"||c.ctrlKey){return}else{if(b=="Backspace"){if((z.charAt(s-1)==i&&l)){s=s-1}else{if(z.charAt(s-1)==n){s=s-1;p=true}else{if(w==s){z=z.substring(0,w-1)+z.substring(s);s=s-1}else{z=z.substring(0,w)+z.substring(s);s=s-(s-w)}}}c.preventDefault();if(z==""){u.val(z);u.trigger("input");u.trigger("control_change")}}else{if(b=="Delete"){if(z.charAt(s)==i&&l){s=s+1}else{if(z.charAt(s)==n){s=s+1;m=true}else{if(w==s){z=z.substring(0,w)+z.substring(s+1)}else{z=z.substring(0,w)+z.substring(s);s=s-(s-w)}}}c.preventDefault();if(z==""){u.val(z);u.trigger("input");u.trigger("control_change")}}else{if(b=="-"&&z!="-"){if(z.charAt(0)!="-"){z="-"+z;s=s+1}else{z=z.substring(1);s=s-1}c.preventDefault()}else{if(b=="+"&&z!="-"&&z.charAt(0)=="-"){z=z.substring(1);s=s-1;c.preventDefault()}else{var g=/^[-0-9,. ]|\./;if(!g.test(b)){c.returnValue=false;c.preventDefault()}else{if(z.indexOf(i)!==-1&&w==z.length){if(z.length-z.indexOf(i)>A){c.preventDefault();return}}if(l&&z.charAt(0)=="0"&&z.charAt(1)==i&&s==w&&(s==0||s==1)){z=b+z.substring(1);s=1}else{if(w!=s){z=z.substring(0,w)+b+z.substring(s);s=s-(s-w)+1}else{z=z.substring(0,s)+b+z.substring(s);s=s+1}}if(b==i){if(z.split(b).length-1>1){z=z.slice(0,s-1)+(z.substring(s)||"");s=z.indexOf(i)+1}}c.preventDefault()}}}}}}if(z=="-"||(z.slice(-1)==i&&z.length>1&&!l)){u.val(z);return}if(z==""){if(a!==i){u.attr("data-previous-decimal-sep",i)}if(d!==n){u.attr("data-previous-group-sep",n)}return}if(z.charAt(0)==i||z.charAt(0)==i){if(z.length==1){z="0"+z;if(l){s=s+1}}if(!l){u.val(z);SetCaretPosition(e,s);u.trigger("input");return}}if(u.attr("data-display-group-sep")=="FALSE"){n=""}if(a!==i){z=z.replaceAll(a,".");u.attr("data-previous-decimal-sep",i)}else{z=z.replaceAll(i,".")}if(d!==n){z=z.replaceAll(d,"");u.attr("data-previous-group-sep",n)}else{z=z.replaceAll(n,"")}var k=parseFloat(z);if(k<parseFloat(u.attr("data-min"))||k>parseFloat(u.attr("data-max"))){SetInvalidationMessage2(u.attr("id"),true,SubstituteIntoText({min:u.attr("data-min"),max:u.attr("data-max")},g_LocalizedStrings.NUMBER_INPUT_INVALID))}else{SetInvalidationMessage2(u.attr("id"),false,"")}if(z.indexOf(".")==-1&&!l){A=0}k=NumberFormat(k,A,i,n);var h=k.substring(0,s);var f=r.split(n).length-1;var o=h.split(n).length-1;if(r!=h&&f!=o&&n&&!p&&!m){var v=o-f;s=s+v}if(!l&&A!=0&&z.indexOf(".")!=-1){if(b=="0"){k=RemoveTrailingZeros(k,i,s)}else{k=RemoveTrailingZeros(k,i,false)}}u.val(k);u.attr("data-previous-value",k);if(x!="blur"&&x!="control_change"){SetCaretPosition(e,s)}if(q.type!="input"){u.trigger("input")}}function NumberInputBlurValidate(a){var d=a.currentTarget;var c=$(a.currentTarget);var e=c.val();var b=NumberSeparator("decimal");if(e.charAt(0)==b&&e.length>1){e=0+e;c.val(e)}c.trigger("control_change")}function RemoveTrailingZeros(c,d,a){if(a){var f=c.length;for(var b=0;b<f-a;b++){c=c.substring(0,c.length-1)}}else{var e=false;while(!e){if(c.slice(-1)==d){c=c.substring(0,c.length-1);e=true;break}else{if(c.slice(-1)==0){c=c.substring(0,c.length-1)}else{e=true}}}}return c}function SetCaretPosition(c,b){if(c!=null){if(c.createTextRange){var a=c.createTextRange();a.move("character",b);a.select()}else{if(c.selectionStart){c.focus();c.setSelectionRange(b,b)}else{c.focus()}}}}function NumberSeparator(b){const a=1000.1;return Intl.NumberFormat(GetLanguage()).formatToParts(a).find(function(c){return c.type===b}).value}function NumberFormat(f,c,h,e){if(h==null){h=NumberSeparator("decimal")}if(e==null){e=NumberSeparator("group")}f=(f+"").replace(/[^0-9+\-Ee.]/g,"");var b=!isFinite(+f)?0:+f,a=!isFinite(+c)?0:Math.abs(c),k=(typeof e==="undefined")?",":e,d=(typeof h==="undefined")?".":h,i="",g=function(o,m){var l=Math.pow(10,m);return""+Math.round(o*l)/l};i=(a?g(b,a):""+Math.round(b)).split(".");if(i[0].length>3){i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,k)}if((i[1]||"").length<a){i[1]=i[1]||"";i[1]+=new Array(a-i[1].length+1).join("0")}return i.join(d)}function TreeView_Add(b,a){if(!b||b==="?"||!a){return}SetControlProp(b,"value",GetControlProp(b,"value").concat([a]))}function TreeView_Remove(e,c){if(!e||e==="?"){return}var d=GetControlProp(e,"value");var f=c;var a=[];var b;d=d.filter(function(g){if(g.id==f){a.push(g.id)}return g.id!=f});while(a.length>0){b=a.shift();d=d.filter(function(g){var h=g.parent==b;if(h){a.push(g.id)}return !h})}SetControlProp(e,"value",d)}function TreeView_Move(g,e,h){if(!g||g==="?"){return}var c=GetControlProp(g,"value");var b=[];var a=[];for(var d=0;d<c.length;d++){if(c[d].id!=e){b.push(c[d])}else{a.push(c[d]);a[a.length-1]["parent"]=h}}var f=b.concat(a);SetControlProp(g,"value",f)}function OpenAlertBox(f,i,e,a,g,b,h,k){var c="alert-"+Math.random().toString().replace("0.","");var d=$('<div id="'+c+'" class="_sys_notif alert '+e+" "+(h?"alert-clickable":"")+'" style="display:none">'+(g?'<button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>':"")+"</div>");d.append($('<p class="_sys_notif_title"></p>').text(f));d.append($("<p></p>").text(i));$("#notif-holder-"+b).append(d);$("#"+c).slideDown(400);if(h&&k!=""){$("#"+c).on("click",function(l){$(document).trigger("notif_clicked",[k]);$("#"+c).slideUp(400,function(){$("#"+c).remove()})})}if(a!="0"){a=a*1000;setTimeout(function(){$("#"+c).slideUp(400,function(){$("#"+c).remove()})},a)}if(g){$("#"+c).find(".close").on("click",function(l){l.stopImmediatePropagation();$("#"+c).slideUp(400,function(){$("#"+c).remove()})})}}function PrefSuffDropdownHandle(b){var c=$(b).attr("data-value");var a=$(b).parent().parent().parent().find(".dropdown-toggle");a.text($(b).text()).append(' <span class="caret"></span>');a.attr("data-value",c);$(b).parent().parent().parent().parent().find("input").trigger("recalcWidth")}function SetFrameFocusable(a){var b=$("a,button,input,select,textarea,[tabindex]");if(a){b.filter("[data-original-tabindex]").each(function(){$(this).attr("tabindex",$(this).attr("data-original-tabindex"))});b.removeAttr("data-original-tabindex")}else{b.filter("[tabindex]").each(function(){$(this).attr("data-original-tabindex",$(this).attr("tabindex"))});b.attr("tabindex",-1)}};